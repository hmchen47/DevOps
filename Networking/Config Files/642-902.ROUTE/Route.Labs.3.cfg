
! #########################################################################
! Lab 3-1 Single-Area OSPF Link Costs and Interface Priorityies
!
! File: RTR.Lab.3-1.OSPF.Costs.Priorities
!
! Procedures:
! 1. Configure addressing ad loopbacks
!   a. Configure IP addresses
!   b. Configure DCE
!   c. Verify link connectivity
! 2. Configure OSPF
!   a-e. Configure OSPF on R1~R3 with debug on R1
!   f. Configure EIRGP on R3
! 3. Use OSPF verification commands
!   a. Display routign protocol information
!   b. Display Router ID
!   c. Display neighbor status
!   d. Display interface timers and network types
!   e. Display simple version of interface infromation
!   f. Display OSPF database
! 4. Add loopback interfaces to OSPF
!   a. Verify loopback not advertised
!   b. Add loopbacks to advertise
!   c. Verify advertised loopbacks
!   d. Correct subnet masks for loopbacks
!   e. Verify connectivity within tclsh
! 5. Modify OSPF link costs
! 6. Modify interface properties to control the DR and BDR election
! 7. Topology chane
!   a. Trace the path to R1 Lo1 from R3 
!   b. Observe the down of R1 f0/0 on R3
!
!
! 1. Configure addressing ad loopbacks
!   a. Configure IP addresses
! 
! R1
int lo1
 desc Engineering Department
 ip add 10.1.1.1 255.255.255.0

int s0/0
 desc R1-->R2
 enc ppp
 ip add 10.1.100.1 255.255.255.0
 no shut

int f0/0
 desc R1-->SW
 ip add 10.1.200.1 255.255.255.0
 no shut

! R2
int lo2
 desc Marketing Department
 ip add 10.1.2.1 255.255.255.0

int s0/0
 desc R1-->R2
 enc ppp
 ip add 10.1.100.2 255.255.255.0
 no shut

int f0/0
 desc R2-->SW
 ip add 10.1.200.2 255.255.255.0
 no shut

! R3
int lo3
 desc Accounting Department
 ip add 10.1.3.1 255.255.255.0

int f0/0
 desc R3-->SW
 ip add 10.1.200.3 255.255.255.0
 no shut

! b. Configure DCE 
!
! R1
int s0/0
 clock rate 64000
 band 64

! R2
int s0/0
 band 64

! c. Verify link connectivity

! 2. Configure OSPF
!  a-e. Configure OSPF on R1~R3 with debug on R1
!
! R1
do deb ip ospf adj

router ospf 1
 net 10.1.100.0 0.0.0.255 area 0
 net 10.1.200.0 0.0.0.255 area 0

! R2
router ospf 1
 net 10.1.100.0 0.0.0.255 area 0
 net 10.1.200.0 0.0.0.255 area 0

! R3
router ospf 1
 net 10.1.200.0 0.0.0.255 area 0

! R1
do un all

! f. Difference btw subnet mask and wildcard mask

! 3. Use OSPF verification commands on R1
!  a. Display routign protocol information
!  b. Display Router ID
!  c. Display neighbor status
!  d. Display interface timers and network types
!  e. Display simple version of interface infromation
!  f. Display OSPF database
do sh ip pro

do sh ip ospf

do sh ip ospf nei

do sh ip ospf int bri

do sh ip ospf database

! 4. Add loopback interfaces to OSPF
!  a. Verify loopback not advertised on R1 ~ R3
do sh ip rou

! b. Add loopbacks to OSPF
!
! R1
router ospf 1
 net 10.1.1.0 0.0.0.255 area 0

! R2
router ospf 1
 net 10.1.2.0 0.0.0.255 area 0

! R3
router ospf 1
 net 10.1.3.0 0.0.0.255 area 0

! c. Verify advertised loopbacks on R1
do sh ip rou

do sh ip ospf int lo1

! d. Correct subnet masks for loopbacks
!
! R1
int lo1
 ip ospf network point-to-point

! R2
int lo2
 ip ospf network point-to-point

! R3
int lo3
 ip ospf network point-to-point

! e. Verify connectivity within tclsh
end 
tclsh

foreach addr {
10.1.1.1
10.1.2.1
10.1.3.1
10.1.100.1
10.1.100.2
10.1.200.1
10.1.200.2
10.1.200.3
} { ping $addr}

exit
conf t

! 5. Modify OSPF link costs on R1 ~ R3

int f0/0
 ip ospf cost 50

do sh ip route

! For reference only: change reference base
router ospf 1
 quto-cost reference-bandwidth 1000

! 6. Modify interface properties to control the DR and BDR election
!
! R1
int f0/0
 ip ospf priority 5

! R2
int f0/0
 ip ospf priority 10

! R1
do sh ip ospf nei detail

! 7. Topology chane
!  a. Trace the path to R1 Lo1 from R3 
!  b. Observe the down of R1 f0/0 on R3
do trace 10.1.1.1

do pi 10.1.1.1 repeat 10000

! R1 
int f0/0
 shut

!
! Running Configuration
!
! R1


! R2


! R3




! #########################################################################
! Lab 3-2 Multi-Area OSPF with Stub Areas and Authentication
!
! File: RTR.Lab.3-2.OSPF.Stub.Authentication
!
! Procedures:
! 1. Configure addressing and loopbacks with clock rate = 64000
! 2. Configure OSPF
!   a. Config OSPF Area 0
!   b. Verify neighbors on R1 & R2
!   c. Verify routing table on R1 & R2
!   d. Config OSPF Area 23
!   e. Verify neighbors on R2
!   f. Verify routign table on R1
!   g. Verify routing table on R2
!   h-i. Verify connectivity with tclsh except Lo20
! 3. Configure a stub area
!   a. Config stub area on R2 & R3
!   b. Verify stub area on R2 & R3
!   c. Display routing table on R3
!   d. Verify type of area on R2
! 4. Config a totally stubby area
!   a. Display routing table on R3
!   b. Display LSDB on R2
!   c. Configure totally stubby area on R2
!   d. Display ruting table on R3
!   e. Verify LSDB on R3
! 5. Configure a not-so-stubby area
!   a. Change Area 23 as NSSA
!   b. Display routing protocol information on R2
!   c. Display routing table on R2
!   d. Display routing table on R1
!   e. Display routing tbale on R3
!   f. Modify Area 23 as a totally stubby NSSA
!   g. Display routing table on R3
!   h. Display LSDB on R2
! 6. Configure OSPF interface authentication
!   a. Configure plan text authentication btw R2 & R3
!   b. Verify the authentication
!   c. Configure MD5 authentication btw R1 & R2
!   d. Verify the authentication
!   e. Verify connectivity as Step 2.h
!
!
! 1. Configure addressing and loopbacks with clock rate = 64000
! 
! R1
int lo1
 desc Engineer Department
 ip add 10.1.1.1 255.255.255.0

int s0/0
 enc ppp
 ip add 10.1.12.1 255.255.255.0
 clock rate 64000
 no shut

! R2
int lo2
 desc Marketing Department
 ip add 10.1.2.1 255.255.255.0

int s0/0
 enc ppp
 ip add 10.1.12.2 255.255.255.0
 no shut

int s0/1
 enc ppp
 ip add 10.1.23.2 255.255.255.0
 clock rate 64000
 no shut

! R3
int lo3
 desc Accounting Department
 ip add 10.1.3.1 255.255.255.0

int lo20
 desc External domain
 ip add 172.20.200.1 255.255.255.0

int s0/0
 enc ppp
 ip add 10.1.23.3 255.255.255.0
 no shut

! 2. Configure OSPF
!  a. Config OSPF Area 0
! R1
router ospf 1
 net 10.1.12.0 0.0.0.255 area 0
 net 10.1.1.0 0.0.0.255 area 0

int lo1
 ip ospf network point-to-point

! R2
router ospf 1
 net 10.1.12.0 0.0.0.255 area 0
 net 10.1.2.0 0.0.0.255 area 0

int lo1
 ip ospf network point-to-point

! b. Verify neighbors on R1 & R2
! c. Verify routing table on R1 & R2
do sh ip ospf nei

do sh ip rou

! d. Config OSPF Area 23
!
! R2
router ospf 1
 net 10.1.23.0 0.0.0.255 area 23

! R3
router ospf 1
 net 10.1.3.0 0.0.0.255 area 23
 net 10.1.23.0 0.0.0.255 area 23

int lo3
 ip ospf network point-to-point

! e. Verify neighbors on R2
do sh ip ospf nei

! f. Verify routign table on R1
! g. Verify routing table on R2
do sh ip rou

! h-i. Verify connectivity with tclsh except Lo20
end
tclsh

foreach addr {
 10.1.1.1
 10.1.2.1
 10.1.3.1
 10.1.12.1
 10.1.12.2
 10.1.23.2
 10.1.23.3
 172.20.200.1
} { ping $addr}

exit
conf t

! 3. Configure a stub area on R2 & R3
!  a. Config stub area 
!  b. Verify stub area 
!  c. Display routing table
!  d. Verify type of area
!
router ospf 1
 area 23 stub

do sh ip ospf nei

do sh ip rou

do sh ip ospf

! 4. Config a totally stubby area
!  a. Display routing table on R3
do sh ip rou

! b. Display LSDB on R2
do sh ip ospf database

! c. Configure totally stubby area on R2
router ospf 1
 area 23 stub no-summary

! d. Display ruting table on R3
! e. Verify LSDB on R3
do sh op rou

do sh ip ospf database

! 5. Configure a not-so-stubby area
!  a. Change Area 23 as NSSA
! R2
router ospf 1
 no area 23 stub
 area 23 nssa

! R3
router ospf 1
 no area 23 stub
 area 23 nssa 
 redist connected subnets

! b. Display routing protocol information on R2
do sh ip ospf

! c. Display routing table on R2
! d. Display routing table on R1
! e. Display routing tbale on R3
do sh ip route

! f. Modify Area 23 as a totally stubby NSSA
router ospf 1
 area 23 nssa no-summary

! g. Display routing table on R3
do sh ip rou

! h. Display LSDB on R2
do sh ip ospf database

! 6. Configure OSPF interface authentication
!  a. Configure plan text authentication btw R2 & R3
router ospf 1
 ip ospf authentication
 ip ospf authentication-key cisco

! b. Verify the authentication
do sh ip  ospf interface s0/0

! c. Configure MD5 authentication btw R1 & R2
router ospf 1
 ip ospf authentication message-digest
 ip ospf message-digest-key 1 md5 cisco

! d. Verify the authentication
do sh ip ospf int s0/0

! e. Verify connectivity as Step 2.h
end 
tclsh

foreach addr {
 10.1.1.1
 10.1.2.1
 10.1.3.1
 10.1.12.1
 10.1.12.2
 10.1.23.2
 10.1.23.3
 172.20.200.1
} {ping $addr}


! 
! Running Configuration
!
! R1


! R2


! R3




! #########################################################################
! Lab 3-3 OSPF Virtual Links and Area Summarization
!
! File: RTR.Lab.3-3.OSPF.VL.Summarzation
!
! Procedures:
! 1. Configure addressing and loopbacks
! 2. Configure OSPF
!   a. Configure OSPF Area 0
!   b. Verify neighbor and routing tables for Area 0
!   c. Configure OSPF Area 23
!   d. Verify neighbor table on R2
!   e. Verify connectivity w/ tclsh
! 3. Create virtual line
!   a. Add loopbacks on R3 and change subnet masks
!   b. Display routing table on R2
!   c. Display neighbor status and protocol information
!   d. Display routing, neighbor, and interface on R2
!   e. Display simple version of interface information
! 4. Summarize an area
!   a. Configure R3 to summarize into one supernet
!   b. Verify summarization on R2
!   c. Verify sink route on R3
! 5. Generate a default route into OSPF
!   a. Generate default route on R1
!   b. Verify default route on R2 & R3
!   c. Verify connectivity from R2/R3 to Internet
!   d. Verify connectivity with tclsh
! 6. Configure OSPF authentication
!
!
! 1. Configure addressing and loopbacks
!
! R1
int lo1
 desc Engineer Department
 ip add 10.1.1.1 255.255.255.0

int lo30
 ip add 172.30.30.1 255.255.255.252

int s0/0
 enc ppp
 ip add 10.1.12.1 255.255.255.0
 clock rate 64000
 no shut

! R2
int lo2
 desc Marketing Department
 ip add 10.1.2.1 255.255.255.0

int s0/0
 enc ppp
 ip add 10.1.12.2 255.255.255.0
 no shut

int s0/1
 enc ppp
 ip add 10.1.23.2 255.255.255.0
 clock rate 64000
 no shut

! R3
int lo3
 desc Accounting Department
 ip add 10.1.3.1 255.255.255.0

int lo 100
 ip add 192.168.100.1 255.255.255.0

int lo 101
 ip add 192.168.101.1 255.255.255.0

int lo 102
 ip add 192.168.102.1 255.255.255.0

int lo 103
 ip add 192.168.103.1 255.255.255.0

int s0/0
 enc ppp
 ip add 10.1.23.3 255.255.255.0
 no shut

! 2. Configure OSPF
!  a. Configure OSPF Area 0
!  b. Verify neighbor and routing tables for Area 0
!
! R1 
router ospf 1
 net 10.1.12.0 0.0.0.255 area 0
 net 10.1.1.0 0.0.0.255 area 0

int lo1
 ip ospf net point-to-point

! R2
router ospf 1
 net 10.1.12.0 0.0.0.255 area 0
 net 10.1.2.0 0.0.0.255 area 0

int lo2
 ip ospf net point-to-point

! R1 & R2
do sh ip ospf nei

do sh ip ospf database

do sh ip rou

! c. Configure OSPF Area 23
!
! R2
router ospf 1
 net 10.1.23.0 0.0.0.255 area 23

! R3
router ospf 1
 net 10.1.23.0 0.0.0.255 area 23
 net 10.1.3.0 0.0.0.255 area 23

int lo3
 ip ospf net point-to-point

! d. Verify neighbor table on R2
do sh ip ospf nei

! e. Verify connectivity w/ tclsh
end 
tclsh

foreach addr {
 10.1.1.1
 10.1.1.1
 10.1.3.1
 10.1.12.1
 10.1.12.2
 10.1.23.2
 10.1.23.3
 172.30.30.1
 192.168.100.1
 192.168.101.1
 192.168.102.1
 192.168.103.1
} { ping $addr}

exit
conf t

! 3. Create virtual line
!  a. Add loopbacks on R3 and change subnet masks
router ospf 1
 net 192.168.100.0 0.0.3.255 area 100

int lo100
 ip ospf net point-to-point
int lo101
 ip ospf net point-to-point
int lo102
 ip ospf net point-to-point
int lo103
 ip ospf net point-to-point

! b. Display routing table on R2 & R3
do sh ip rou

do sh ip ospf 

! c. Create virtual link
!
! r2
router ospf 1
 area 23 virtual-link 192.168.103.1

! R3
router ospf 1
 area 23 virtual-link 10.1.2.1

! d. Display routing, neighbor, and interface on R2
do sh ip ospf nei

do sh ip ospf

do sh ip ospf database

do sh ip rou

! 4. Summarize an area
!  a. Configure R3 to summarize into one supernet
router ospf 1
 area 100 range 192.168.100.0 255.255.252.0

! b. Verify summarization on R2
do sh ip rou

do sh ip ospf database

! c. Verify sink route on R3
do sh ip rou

! 5. Generate a default route into OSPF
!  a. Generate default route on R1
router ospf 1
 default-information originate always

! b. Verify default route on R2 & R3
! c. Verify connectivity from R2/R3 to Internet

do sh ip rou

do pi 172.30.30.1

! d. Verify connectivity with tclsh
!   Same as Step 2.e

! 6. Configure OSPF authentication
!
! R2
int s0/1
 ip ospf authentication message-digest 
 ip ospf message-digest-key 1 md5 cisco123

! R3
int s0/0
 ip ospf authentication message-digest 
 ip ospf message-digest-key 1 md5 cisco123


! For virtual link
! R2 & R3
router ospf 1
 area 0 authentication
 area 23 virtual-link authentication-key cisco


!
! Runnugn Configuration
!
! R1
interface Loopback1
 description Engineer Department
 ip address 10.1.1.1 255.255.255.0
 ip ospf network point-to-point
!
interface Loopback30
 ip address 172.30.30.1 255.255.255.252
!
interface Serial0/0
 ip address 10.1.12.1 255.255.255.0
 encapsulation ppp
 clock rate 64000
!
router ospf 1
 log-adjacency-changes
 network 10.1.1.0 0.0.0.255 area 0
 network 10.1.12.0 0.0.0.255 area 0
 default-information originate always

! R2
interface Loopback2
 description Marketing Department
 ip address 10.1.2.1 255.255.255.0
 ip ospf network point-to-point
!
interface Serial0/0
 ip address 10.1.12.2 255.255.255.0
 encapsulation ppp
 clock rate 2000000
!
interface Serial0/1
 ip address 10.1.23.2 255.255.255.0
 encapsulation ppp
 ip ospf authentication message-digest
 ip ospf message-digest-key 1 md5 cisco123
 clock rate 64000
!
router ospf 1
 log-adjacency-changes
 area 0 authentication
 area 23 virtual-link 192.168.103.1 authentication-key cisco
 network 10.1.1.0 0.0.0.255 area 0
 network 10.1.2.0 0.0.0.255 area 0
 network 10.1.12.0 0.0.0.255 area 0
 network 10.1.23.0 0.0.0.255 area 23

! R3
interface Loopback100
 ip address 192.168.100.1 255.255.255.0
 ip ospf network point-to-point
!
interface Loopback101
 ip address 192.168.101.1 255.255.255.0
 ip ospf network point-to-point
!
interface Loopback102
 ip address 192.168.102.1 255.255.255.0
 ip ospf network point-to-point
!
interface Loopback103
 ip address 192.168.103.1 255.255.255.0
 ip ospf network point-to-point
!
interface Serial0/0
 ip address 10.1.23.3 255.255.255.0
 encapsulation ppp
 ip ospf authentication message-digest
 ip ospf message-digest-key 1 md5 cisco123
 clock rate 2000000
!
router ospf 1
 log-adjacency-changes
 area 0 authentication
 area 23 virtual-link 10.1.2.1 authentication-key cisco
 area 100 range 192.168.100.0 255.255.252.0
 network 10.1.3.0 0.0.0.255 area 23
 network 10.1.23.0 0.0.0.255 area 23
 network 192.168.100.0 0.0.0.255 area 100
 network 192.168.100.0 0.0.3.255 area 100


! #########################################################################
! Lab 3-4 OSPF over Frame Relay
!
! File: RTR.Lab.3-4.OSPF.FR
!
! Procedures:
! 1. Configure addressing and loopbacks
! 2. Configure Frame Relay switch
! 3. Configure OSPF network type NBMA
!   a. Configure OSPF area 0
!   b. Modify priority on FR interfaces of routers
!   c. Configure neighboring relationship
!   d. Verify neighbor table on R1/HQ
! 4. Change network type to point-to-multipoint
!   a. Clear neighboring relationship and priority
!   b. Configure point-to-multipoint interfaces
!   c. Observe the routign table on EAST/R2
!   d. Verify network type on interface of EAST/R2
! 5. Change OSPF timers
!   a. Configure OSPF with Etherent links
!   b. Display network type on EAST/R2
!   c. Configure OSPF timers on EAST/R2 and WEST/R4
!   d. Verify timer changes on EAST/R2
!   e. Verify connectivity with tclsh
! 6. Minimal Hello Intervals
!   a. Configure to send 5 hellos/sec
!   b. Observe the dead timer on neighbor table
!   c. Display timer infromation
!
! 1. Configure addressing and loopbacks
! R1
hostname HQ

int lo1
 ip add 10.1.1.1 255.255.255.0

int s0/0
 ip add 10.1.123.1 255.255.255.0
 enc frame ietf
 no frame-relay inverse-arp
 frame map ip 10.1.123.1 102
 frame map ip 10.1.123.2 102
 frame map ip 10.1.123.3 103
 no shut

! R2
hostname EAST

int lo2
 ip add 10.1.2.1 255.255.255.0

int s0/0
 ip add 10.1.123.2 255.255.255.0
 clock rate 64000
 enc fram ietf
 no frame inverse-arp
 frame map ip 10.1.123.1 201
 frame map ip 10.1.123.2 201
 frame map ip 10.1.123.3 201
 no shut

int f0/0
 ip add 10.1.23.2 255.255.255.0
 no shut

! R4
hostname WEST

int lo3
 ip add 10.1.3.1 255.255.255.0

int s0/0
 ip add 10.1.123.3 255.255.255.0
 clock rate 64000
 enc fram ietf
 no frame inverse-arp
 frame map ip 10.1.123.1 301
 frame map ip 10.1.123.2 301
 frame map ip 10.1.123.3 301
 no shut

int f0/0
 ip add 10.1.23.3 255.255.255.0
 no shut

! Verify connectivity
do pi 

! 2. Configure Frame Relay switch
hostname FRS
!
frame-relay switching
interface Serial0/0
 no ip address
 encapsulation frame-relay ietf
 no ip route-cache
 clock rate 64000
 frame-relay intf-type dce
 frame-relay route 102 interface Serial0/1 201
 frame-relay route 103 interface Serial0/2 301
 no shutdown
!
interface Serial0/1
 no ip address
 encapsulation frame-relay ietf
 frame-relay intf-type dce
 frame-relay route 201 interface Serial0/0 102
 no shutdown
!
interface Serial0/2
 no ip address
 encapsulation frame-relay ietf
 no ip route-cache
 frame-relay intf-type dce
 clock rate 64000
 frame-relay route 301 interface Serial0/0 103
 no shutdown

! 3. Configure OSPF network type NBMA
!   a. Configure OSPF area 0
! 
! HQ/R1
router ospf 1
 net 10.1.123.0 0.0.0.255 area 0
 net 10.1.1.0 0.0.0.255 area 0

int lo1
 ip ospf net point-to-point

! EAST/R2
router ospf 1
 net 10.1.123.0 0.0.0.255 area 0
 net 10.1.2.0 0.0.0.255 area 0

int lo2
 ip ospf net point-to-point

! WEST/R4
router ospf 1
 net 10.1.123.0 0.0.0.255 area 0
 net 10.1.3.0 0.0.0.255 area 0

int lo3
 ip ospf net point-to-point

! b. Modify priority on FR interfaces of routers
! 
! R2/EAST - R4/WEST
int s0/0
 ip ospf priority 0

! c. Configure neighboring relationship
!
! R1/HQ
router ospf 1
 nei 10.1.123.2
 nei 10.1.123.3

! R2/WEST
router ospf 1
 nei 10.1.123.1

! R3/EAST
router ospf 1
 nei 10.1.123.1

! d. Verify neighbor table on R1/HQ
do sh ip ospf nei

! 4. Change network type to point-to-multipoint
!  a. Clear neighboring relationship and priority
!
! R1/HQ
router ospf 1
 no nei 10.1.123.2
 no nei 10.1.123.3

! R2/EAST - R3/WEST
router ospf 1
 no nei 10.1.123.1

! b. Configure point-to-multipoint interfaces
!
! R1/HQ
int s0/0
 ip ospf net point-to-multipoint
 fram map ip 10.1.123.2 102 bro
 fram map ip 10.1.123.3 103 bro

! R2/WEST
int s0/0
 ip ospf net point-to-multipoint
 fram map ip 10.1.123.1 201 bro
 fram map ip 10.1.123.3 201 bro

! R4/EAST
int s0/0
 ip ospf net point-to-multipoint
 fram map ip 10.1.123.1 301 bro
 fram map ip 10.1.123.2 301 bro

do sh ip ospf nei

! c. Observe the routign table on EAST/R2
do sh ip rou

! d. Verify network type on interface of EAST/R2
do show ip ospf int s0/0

! 5. Change OSPF timers
!  a. Configure OSPF with Etherent links
!
! R2/EAST
router ospf 1
 net 10.1.23.0 0.0.0.255 area 0

! R4/WEST
router ospf 1
 net 10.1.23.0 0.0.0.255 area 0

! b. Display network type on EAST/R2
do sh ip ospf int f0/0

! c. Configure OSPF timers on EAST/R2 and WEST/R4
!
! R2/EAST & R4/WEST
int f0/0
 ip ospf hello-interval 5
 ip ospf hold-time 15

! d. Verify timer changes on EAST/R2
do sh ospf int f0/0

! e. Verify connectivity with tclsh
end
tclsh

foreach address {
 10.1.1.1
 10.1.2.1
 10.1.3.1
 10.1.123.1
 10.1.123.2
 10.1.123.3
 10.1.23.2
 10.1.23.3
} {ping $address }

exit
conf t
! 6. Minimal Hello Intervals
!  a. Configure to send 5 hellos/sec
!
! R2/EAST & R4/WEST
int f0/0
 ip ospf dead-interval minimal hello-multiplier 5

! b. Observe the dead timer on neighbor table
do sh ip ospf nei

! c. Display timer infromation
do sh ip ospf int f0/0

! 
! Running Configuration for NBMA
!
! R1/HQ
interface Loopback1
 ip address 10.1.1.1 255.255.255.0
 ip ospf network point-to-point
!
interface Serial0/0
 ip address 10.1.123.1 255.255.255.0
 encapsulation frame-relay IETF
 clock rate 2000000
 frame-relay map ip 10.1.123.1 102
 frame-relay map ip 10.1.123.2 102
 frame-relay map ip 10.1.123.3 103
 no frame-relay inverse-arp
!
router ospf 1
 log-adjacency-changes
 network 10.1.1.0 0.0.0.255 area 0
 network 10.1.123.0 0.0.0.255 area 0
 neighbor 10.1.123.2
 neighbor 10.1.123.3

! R2/EAST
interface Loopback2
 ip address 10.1.2.1 255.255.255.0
 ip ospf network point-to-point
!
interface FastEthernet0/0
 ip address 10.1.23.2 255.255.255.0
 duplex auto
 speed auto
!
interface Serial0/0
 ip address 10.1.123.2 255.255.255.0
 encapsulation frame-relay IETF
 ip ospf priority 0
 clock rate 64000
 frame-relay map ip 10.1.123.1 201
 frame-relay map ip 10.1.123.2 201
 frame-relay map ip 10.1.123.3 201
 no frame-relay inverse-arp
!
router ospf 1
 log-adjacency-changes
 network 10.1.2.0 0.0.0.255 area 0
 network 10.1.123.0 0.0.0.255 area 0

! R4/WEST
interface Loopback3
 ip address 10.1.3.1 255.255.255.0
 ip ospf network point-to-point
!
interface FastEthernet0/0
 ip address 10.1.23.3 255.255.255.0
 duplex auto
 speed auto
!
interface Serial0/0
 ip address 10.1.123.3 255.255.255.0
 encapsulation frame-relay IETF
 ip ospf priority 0
 clock rate 64000
 frame-relay map ip 10.1.123.1 301
 frame-relay map ip 10.1.123.2 301
 frame-relay map ip 10.1.123.3 301
 no frame-relay inverse-arp
!
router ospf 1
 log-adjacency-changes
 network 10.1.3.0 0.0.0.255 area 0
 network 10.1.123.0 0.0.0.255 area 0


!
! Runnign Configuration for point-to-multipoint mode
!
! R1/HQ
interface Loopback1
 ip address 10.1.1.1 255.255.255.0
 ip ospf network point-to-point
!
interface Serial0/0
 ip address 10.1.123.1 255.255.255.0
 encapsulation frame-relay IETF
 ip ospf network point-to-multipoint
 clock rate 2000000
 frame-relay map ip 10.1.123.1 102
 frame-relay map ip 10.1.123.2 102 broadcast
 frame-relay map ip 10.1.123.3 103 broadcast
 no frame-relay inverse-arp
!
router ospf 1
 log-adjacency-changes
 network 10.1.1.0 0.0.0.255 area 0
 network 10.1.123.0 0.0.0.255 area 0

! R2/EAST
interface Loopback2
 ip address 10.1.2.1 255.255.255.0
 ip ospf network point-to-point
!
interface FastEthernet0/0
 ip address 10.1.23.2 255.255.255.0
 ip ospf hello-interval 5
 ip ospf dead-interval 15
 duplex auto
 speed auto
!
interface Serial0/0
 ip address 10.1.123.2 255.255.255.0
 encapsulation frame-relay IETF
 ip ospf network point-to-multipoint
 ip ospf priority 0
 clock rate 64000
 frame-relay map ip 10.1.123.1 201 broadcast
 frame-relay map ip 10.1.123.2 201
 frame-relay map ip 10.1.123.3 201 broadcast
 no frame-relay inverse-arp
!
router ospf 1
 log-adjacency-changes
 network 10.1.2.0 0.0.0.255 area 0
 network 10.1.23.0 0.0.0.255 area 0
 network 10.1.123.0 0.0.0.255 area 0

! R3/WEST
interface Loopback3
 ip address 10.1.3.1 255.255.255.0
 ip ospf network point-to-point
!
interface FastEthernet0/0
 ip address 10.1.23.3 255.255.255.0
 ip ospf hello-interval 5
 ip ospf dead-interval 15
 duplex auto
 speed auto
!
interface Serial0/0
 ip address 10.1.123.3 255.255.255.0
 encapsulation frame-relay IETF
 ip ospf network point-to-multipoint
 ip ospf priority 0
 clock rate 64000
 frame-relay map ip 10.1.123.1 301 broadcast
 frame-relay map ip 10.1.123.2 301 broadcast
 frame-relay map ip 10.1.123.3 301
 no frame-relay inverse-arp
!
router ospf 1
 log-adjacency-changes
 network 10.1.3.0 0.0.0.255 area 0
 network 10.1.23.0 0.0.0.255 area 0
 network 10.1.123.0 0.0.0.255 area 0
 neighbor 10.1.123.1

! R3/R3-FR
frame-relay switching
!
interface Serial0/0
 no ip address
 encapsulation frame-relay IETF
 no ip route-cache cef
 no ip route-cache
 clock rate 64000
 frame-relay intf-type dce
 frame-relay route 102 interface Serial0/1 201
 frame-relay route 103 interface Serial0/2 301
!
interface Serial0/1
 no ip address
 encapsulation frame-relay IETF
 clock rate 2000000
 frame-relay intf-type dce
 frame-relay route 201 interface Serial0/0 102
!
interface Serial0/2
 no ip address
 encapsulation frame-relay IETF
 no ip route-cache cef
 no ip route-cache
 clock rate 64000
 frame-relay intf-type dce
 frame-relay route 301 interface Serial0/0 103





! #########################################################################
! Lab 3-5 OSPF Challenge Lab
!
! File: RTR.Lab.3-5.OSPF.Challenge
!
! Requirements:
!  1. Configure addressing and loopbacks
!  2. Configure the bandwidth of serial links
!  3. Configure OSPF with interfaces in the areas
!  4. Configure R2 to summarize area 20 with the most specific 
!     mask possible
!  5. Make the link between R1 and R2 have the OSPF network type  
!     of broadcast, with R1 as the DR.
!  6. Configure R1 to always originate a default route
!  7. Modify the link between R2 and R3 to have hello timers and 
!     dead timers that are double the default value
!  8. Make the link between R2 and R3 have a cost of 500
!  9. Configure area 34 to be a totally stubby area
! 10. Use MD5 authentication with the keyword “cisco” over the 
!     link between R3 and R4
! 11. Figure out the hidden issue in the topology that you need 
!     to address to have full connectivity
! 12. Verify connectivity with tclsh
!
!
! 1. Configure addressing and loopbacks
! 2. Configure the bandwidth of serial links
! 3. Configure OSPF with interfaces in the areas
!
! R1
int lo0
 ip add 172.16.1.1 255.255.255.0
 ip ospf net point-to-point
 ip ospf 1 area 0

int s0/0
 enc ppp
 ip add 172.16.12.1 255.255.255.0
 clock rate 64000
 band 64
 ip ospf 1 area 0
 no shut

! R2
int lo0
 ip add 172.16.2.1 255.255.255.224
 ip ospf 1 area 20
 ip ospf net point-to-point
int lo1
 ip add 172.16.2.33 255.255.255.224
 ip ospf 1 area 20
 ip ospf net point-to-point
int lo2
 ip add 172.16.2.65 255.255.255.224
 ip ospf 1 area 20
 ip ospf net point-to-point
int lo3
 ip add 172.16.2.97 255.255.255.224
 ip ospf 1 area 20
 ip ospf net point-to-point

int s0/0
 enc ppp
 ip add 172.16.12.2 255.255.255.0
 ip ospf 1 area 0
 no shut

int s0/1
 enc ppp
 ip add 172.16.23.2 255.255.255.0
 clock rate 64000
 band 64
 ip ospf 1 area 23
 no shut

router ospf 1
 area 23 virtual-link 172.16.3.1

! R3
int lo0
 ip add 172.16.3.1 255.255.255.0
 ip ospf 1 area 23
 ip ospf net point-to-point

int s0/0
 enc ppp
 ip add 172.16.23.3 255.255.255.0
 ip ospf 1 area 23
 no shut

int s0/1
 enc ppp
 ip add 172.16.34.3 255.255.255.0
 clock rate 64000
 band 64
 ip ospf 1 area 34
 no shut

router ospf 1
 area 23 virtual-link 172.16.2.1

! R4
int lo0
 ip add 172.16.4.1 255.255.255.0
 ip ospf 1 area 34
 ip ospf net point-to-point

int s0/0
 enc ppp
 ip add 172.16.34.4 255.255.255.0
 ip ospf 1 area 34
 no shut
 
! 4. Configure R2 to summarize area 20 with the most specific 
!    mask possible
router ospf 1
 area 20 range 172.16.2.0 255.255.255.128

! 5. Make the link between R1 and R2 have the OSPF network type  
!    of broadcast, with R1 as the DR.
! R1
int s0/0
 ip ospf priority 10
 ip ospf net broadcast

! R2
int s0/0
 ip ospf priority 5
 ip ospf net broadcast

! 6. Configure R1 to always originate a default route
router ospf 1
 default-information originate always

! 7. Modify the link between R2 and R3 to have hello timers and 
!    dead timers that are double the default value
! 8. Make the link between R2 and R3 have a cost of 500
!
! R2
int s0/1
 ip ospf hello 20
 ip ospf dead  80
 ip ospf cost 500

! R3
int s0/0
 ip ospf hello 20
 ip ospf dead  80
 ip ospf cost 500

! 9. Configure area 34 to be a totally stubby area
! 
! R3
router ospf 1
 area 34 stub no-summary

! R4
router ospf 1
 area 34 stub 

! 10. Use MD5 authentication with the keyword “cisco” over the 
!     link between R3 and R4
! 
! R3
int s0/1
 ip ospf authentication message-digest
 ip ospf message-digest-key 1 md5 cisco

! R4
int s0/0
 ip ospf authentication message-digest
 ip ospf message-digest-key 1 md5 cisco

! 11. Figure out the hidden issue in the topology that you need 
!     to address to have full connectivity
! 12. Verify connectivity with tclsh

end 
tclsh

foreach addr {
 172.16.1.1
 172.16.2.1
 172.16.2.33
 172.16.2.65
 172.16.2.97
 172.16.3.1
 172.16.4.1
 172.16.12.1
 172.16.12.2
 172.16.23.2
 172.16.23.3
 172.16.34.3
 172.16.34.4
} { ping $addr}

exit
conf t

!
! Running Configuration
!
! R1
interface Loopback0
 ip address 172.16.1.1 255.255.255.0
 ip ospf network point-to-point
 ip ospf 1 area 0
!
interface Serial0/0
 bandwidth 64
 ip address 172.16.12.1 255.255.255.0
 encapsulation ppp
 ip ospf network broadcast
 ip ospf priority 10
 ip ospf 1 area 0
 clock rate 64000
!
router ospf 1
 log-adjacency-changes
 default-information originate always

! R2
interface Loopback0
 ip address 172.16.2.1 255.255.255.224
 ip ospf network point-to-point
 ip ospf 1 area 20
!
interface Loopback1
 ip address 172.16.2.33 255.255.255.224
 ip ospf network point-to-point
 ip ospf 1 area 20
!
interface Loopback2
 ip address 172.16.2.65 255.255.255.224
 ip ospf network point-to-point
 ip ospf 1 area 20
!
interface Loopback3
 ip address 172.16.2.97 255.255.255.224
 ip ospf network point-to-point
 ip ospf 1 area 20
!
interface Serial0/0
 ip address 172.16.12.2 255.255.255.0
 encapsulation ppp
 ip ospf network broadcast
 ip ospf priority 5
 ip ospf 1 area 0
 clock rate 2000000
!
interface Serial0/1
 bandwidth 64
 ip address 172.16.23.2 255.255.255.0
 encapsulation ppp
 ip ospf cost 500
 ip ospf hello-interval 20
 ip ospf 1 area 23
 clock rate 64000
!
router ospf 1
 log-adjacency-changes
 area 20 range 172.16.2.0 255.255.255.128
 area 23 virtual-link 172.16.3.1

! R3
interface Loopback0
 ip address 172.16.3.1 255.255.255.0
 ip ospf network point-to-point
 ip ospf 1 area 23
!
interface Serial0/0
 ip address 172.16.23.3 255.255.255.0
 encapsulation ppp
 ip ospf cost 500
 ip ospf hello-interval 20
 ip ospf 1 area 23
 clock rate 2000000
!
interface Serial0/1
 bandwidth 64
 ip address 172.16.34.3 255.255.255.0
 encapsulation ppp
 ip ospf authentication message-digest
 ip ospf message-digest-key 1 md5 cisco
 ip ospf 1 area 34
 clock rate 64000
!
router ospf 1
 log-adjacency-changes
 area 23 virtual-link 172.16.2.1
 area 34 stub no-summary

! R4
interface Loopback0
 ip address 172.16.4.1 255.255.255.0
 ip ospf network point-to-point
 ip ospf 1 area 34
!
interface Serial0/0
 ip address 172.16.34.4 255.255.255.0
 encapsulation ppp
 ip ospf authentication message-digest
 ip ospf message-digest-key 1 md5 cisco
 ip ospf 1 area 34
 clock rate 2000000
!
router ospf 1
 log-adjacency-changes
 area 34 stub


! #########################################################################
! Lab 3-6 OSPF Troubleshooting Lab
!
! File: RTR.Lab.3-6.OSPF.Tshoot
!
! Requirements:
!  1. Use the IP addressing scheme shown
!  2. All routers must participate in OSPF
!  3. All interfaces must be in the OSPF areas
!  4. Do not use static routes, default routes, or other routing 
!     protocols
!  5. All IP addresses in the topology must be reachable from all 
!     routers
!  6. The OSPF network type for the link between R2 and R3 is 
!     nonbroadcast
!
! Initial Configuration
!
! R1
hostname R1
!
interface Loopback0
 ip address 172.16.1.1 255.255.255.0
!
interface Serial0/0
 ip address 172.16.12.1 255.255.255.0
 clock rate 64000
 bandwidth 64
 no shutdown
!
router ospf 1
 network 172.16.1.0 0.0.0.255 area 0
 network 172.16.12.2 0.0.0.0 area 0
 
! R2
hostname R2
!
interface Loopback0
 ip address 172.16.2.1 255.255.255.0
!
interface Serial0/0
 ip address 172.16.12.2 255.255.255.0
 bandwidth 64
 no shutdown
!
interface Serial0/1
 ip address 172.16.23.2 255.255.255.0
 ip ospf network non-broadcast
 clock rate 64000
 bandwidth 64
 no shutdown
!
router ospf 1
 network 172.16.2.0 0.0.0.255 area 0
 network 172.16.12.0 0.0.0.255 area 0
 network 172.16.23.0 0.0.0.255 area 0

! R3
hostname R3
!
interface Loopback0
 ip address 172.16.3.1 255.255.255.0
!
interface Serial0/0
 ip address 172.16.23.3 255.255.255.0
 ip ospf network non-broadcast
 bandwidth 64
 no shutdown
!
interface Serial0/1
 ip address 172.16.34.3 255.255.255.0
 clock rate 64000
 bandwidth 64
 no shutdown
!
router ospf 1
 area 34 virtual-link 172.16.4.1
 network 172.16.3.0 0.0.0.255 area 34
 network 172.16.23.0 0.0.0.255 area 0
 network 172.16.34.0 0.0.0.255 area 34

! R4
hostname R4
!
interface Loopback0
 ip address 172.16.4.1 255.255.255.0
!
interface Serial0/0
 ip address 172.16.34.4 255.255.255.0
 bandwidth 64
 no shutdown
!
router ospf 1
 area 34 virtual-link 172.16.34.3
 network 172.16.4.0 0.0.0.255 area 40
 network 172.16.34.0 0.0.0.255 area 34

! Connectivity verification
end
tclsh

foreach addr {
 172.16.1.1
 172.16.2.1
 172.16.3.1
 172.16.4.1
 172.16.12.1
 172.16.12.2
 172.16.23.2
 172.16.23.3
 172.16.34.3
 172.16.34.4
} { ping $addr}

exit
conf t

!
! Running Configuration
!
! R1
interface Loopback0
 ip address 172.16.1.1 255.255.255.0
!
interface FastEthernet0/0
 no ip address
 shutdown
 duplex auto
 speed auto
!
interface Serial0/0
 bandwidth 64
 ip address 172.16.12.1 255.255.255.0
 clock rate 64000
!
interface FastEthernet0/1
 no ip address
 shutdown
 duplex auto
 speed auto
!         
router ospf 1
 log-adjacency-changes
 network 172.16.1.0 0.0.0.255 area 0
 network 172.16.12.0 0.0.0.255 area 0

! R2
interface Loopback0
 ip address 172.16.2.1 255.255.255.0
!
interface FastEthernet0/0
 no ip address
 shutdown
 duplex auto
 speed auto
!
interface Serial0/0
 bandwidth 64
 ip address 172.16.12.2 255.255.255.0
 clock rate 2000000
!
interface FastEthernet0/1
 no ip address
 shutdown
 duplex auto
 speed auto
!         
interface Serial0/1
 bandwidth 64
 ip address 172.16.23.2 255.255.255.0
 ip ospf network non-broadcast
 clock rate 64000
!
router ospf 1
 log-adjacency-changes
 network 172.16.2.0 0.0.0.255 area 0
 network 172.16.12.0 0.0.0.255 area 0
 network 172.16.23.0 0.0.0.255 area 0
 neighbor 172.16.23.3

! R3
interface Loopback0
 ip address 172.16.3.1 255.255.255.0
!
interface FastEthernet0/0
 no ip address
 shutdown
 duplex auto
 speed auto
!
interface Serial0/0
 bandwidth 64
 ip address 172.16.23.3 255.255.255.0
 ip ospf network non-broadcast
 clock rate 2000000
!
interface FastEthernet0/1
 no ip address
 shutdown
 duplex auto
 speed auto
!
interface Serial0/1
 bandwidth 64
 ip address 172.16.34.3 255.255.255.0
 clock rate 64000
!
router ospf 1
 log-adjacency-changes
 area 34 virtual-link 172.16.4.1
 network 172.16.3.0 0.0.0.255 area 34
 network 172.16.23.0 0.0.0.255 area 0
 network 172.16.34.0 0.0.0.255 area 34
 neighbor 172.16.23.2

! R4
interface Loopback0
 ip address 172.16.4.1 255.255.255.0
!
interface FastEthernet0/0
 no ip address
 shutdown
 duplex auto
 speed auto
!
interface Serial0/0
 bandwidth 64
 ip address 172.16.34.4 255.255.255.0
 clock rate 2000000
!
interface FastEthernet0/1
 no ip address
 shutdown
 duplex auto
 speed auto
!         
router ospf 1
 log-adjacency-changes
 area 34 virtual-link 172.16.3.1
 network 172.16.4.0 0.0.0.255 area 40
 network 172.16.34.0 0.0.0.255 area 34


! #########################################################################
! Lab 3-7 OSPF OSPF Case Study
!
! File: RTR.Lab.3-7.OSPF.Case.Study
!
! Requirements:
!  1. Use the IP addressing scheme shown
!  2. Configure OSPF with the networks shown
!  3. Configure the OSPF backbone area to be on Loopback0 on HQ
!  4. Configure the Frame Relay subnets as point-to-point subinterfaces
!  5. Configure area 300 as an NSSA
!  6. Configure the router East loopback interfaces to be in area 200 and
!     Summarize this area
!  7. Redistribute the loopback network on router West into OSPF
!  8. Create virtual links as necessary for full connectivity
!  9. Make sure that all loopback interfaces are advertised with 
!     the correct subnet mask
!
!
! R1
hostname HQ

int lo1
 ip add 10.1.1.9 255.255.255.252
 ip ospf net point-to-point

int s0/0
 enc fram ietf
 no ip address
 no shut

int s0/0.102 point-to-point
 ip add 10.1.1.1 255.255.255.252
 band 64
 fram interface-dlci 102

int s0/0.103 point-to-point
 ip add 10.1.1.5 255.255.255.252
 band 64
 fram interface-dlci 103

router ospf 100
 area 100 virtual-link 10.1.1.101
 area 300 nssa
 net 10.1.1.8 0.0.0.3 area 0
 net 10.1.1.0 0.0.0.3 area 100
 net 10.1.1.4 0.0.0.3 area 300

! R2
hostname East

int lo101
 ip add 10.1.1.101 255.255.255.252
 ip ospf 100 area 200
int lo105
 ip add 10.1.1.105 255.255.255.252
 ip ospf 100 area 200
int lo109
 ip add 10.1.1.109 255.255.255.252
 ip ospf 100 area 200
int lo113
 ip add 10.1.1.113 255.255.255.252
 ip ospf 100 area 200

int s0/0
 enc frame ietf
 no shut

int s0/0.201 point-to-point
 ip add 10.1.1.2 255.255.255.252
 band 64
 frame interface-dlci 201

router ospf 100
 area 100 virtual-link 10.1.1.1
 area 200 range 10.1.1.96 255.255.255.224
 net 10.1.1.100 0.0.0.3 area 200
 net 10.1.1.104 0.0.0.3 area 200
 net 10.1.1.108 0.0.0.3 area 200
 net 10.1.1.112 0.0.0.3 area 200
 net 10.1.1.0 0.0.0.3 area 100

! R4
hostname West

int lo3
 ip add 10.1.1.13 255.255.255.252
 
int s0/0
 enc fram ietf
 no shut

int s0/0.301 point-to-point
 ip add 10.1.1.6 255.255.255.252
 band 64
 fram interface-dlci 301

router ospf 100
 net 10.1.1.4 0.0.0.3 area 300
 red connected subnets
 area 300 nssa

! R3-FR
hostname FRS

frame-relay switching

int s0/0
 no ip addr
 enc fram ietf
 clock rate 64000
 band 64
 frame-relay intf-type dce
 frame-relay route 102 int s0/1 201
 frame-relay route 103 int s0/2 301
 no shut

int s0/1
 no ip addr
 enc fram ietf
 clock rate 64000
 band 64
 frame intf-type dce
 frame-relay route 201 int s0/0 102
 no shut

int s0/2
 no ip addr
 enc fram ietf
 clock rate 64000
 band 64
 frame intf-type dce
 frame-relay route 301 int s0/0 103
 no shut

! Connectivity Verification
end
tclsh

foreach address {
 10.1.1.9
 10.1.1.13
 10.1.1.101
 10.1.1.105
 10.1.1.109
 10.1.1.113
 10.1.1.1
 10.1.1.2
 10.1.1.5
 10.1.1.6
} {
ping $address }

ex
conf t

!
! Running Configuration
!
! R1
interface Loopback1
 ip address 10.1.1.9 255.255.255.252
 ip ospf network point-to-point
 ip ospf 100 area 0
!
interface Serial0/0
 no ip address
 encapsulation frame-relay IETF
 clock rate 2000000
!
interface Serial0/0.102 point-to-point
 bandwidth 64
 ip address 10.1.1.1 255.255.255.252
 frame-relay interface-dlci 102   
!
interface Serial0/0.103 point-to-point
 bandwidth 64
 ip address 10.1.1.5 255.255.255.252
 frame-relay interface-dlci 103   
!
router ospf 100
 log-adjacency-changes
 area 100 virtual-link 10.1.1.101
 area 300 nssa
 network 10.1.1.0 0.0.0.3 area 100
 network 10.1.1.4 0.0.0.3 area 300
 network 10.1.1.8 0.0.0.3 area 0

! R2
interface Loopback101
 ip address 10.1.1.101 255.255.255.252
 ip ospf 100 area 200
!
interface Loopback105
 ip address 10.1.1.105 255.255.255.252
 ip ospf 100 area 200
!
interface Loopback109
 ip address 10.1.1.109 255.255.255.252
 ip ospf 100 area 200
!
interface Loopback113
 ip address 10.1.1.113 255.255.255.252
 ip ospf 100 area 200
!
interface Serial0/0
 no ip address
 encapsulation frame-relay IETF
 clock rate 2000000
!
interface Serial0/0.201 point-to-point
 bandwidth 64
 ip address 10.1.1.2 255.255.255.252
 frame-relay interface-dlci 201   
!
router ospf 100
 log-adjacency-changes
 area 100 virtual-link 10.1.1.1
 area 100 virtual-link 10.1.1.9
 area 200 range 10.1.1.96 255.255.255.224
 network 10.1.1.0 0.0.0.3 area 100
 network 10.1.1.100 0.0.0.3 area 200
 network 10.1.1.104 0.0.0.3 area 200
 network 10.1.1.108 0.0.0.3 area 200
 network 10.1.1.112 0.0.0.3 area 200

! R4
interface Loopback3
 ip address 10.1.1.13 255.255.255.252
!
interface Serial0/0
 no ip address
 encapsulation frame-relay IETF
 clock rate 2000000
!
interface Serial0/0.301 point-to-point
 bandwidth 64
 ip address 10.1.1.6 255.255.255.252
 ip ospf network point-to-point
 ip ospf 100 area 300
 frame-relay interface-dlci 301   
!
router ospf 100
 log-adjacency-changes
 area 300 nssa
 redistribute connected subnets
 network 10.1.1.4 0.0.0.3 area 300

! R3
frame-relay switching
!
interface Serial0/0
 bandwidth 64
 no ip address
 encapsulation frame-relay IETF
 clock rate 64000
 frame-relay intf-type dce
 frame-relay route 102 interface Serial0/1 201
 frame-relay route 103 interface Serial0/2 301
!
interface Serial0/1
 bandwidth 64
 no ip address
 encapsulation frame-relay IETF
 clock rate 64000
 frame-relay intf-type dce
 frame-relay route 201 interface Serial0/0 102
!
interface Serial0/2
 bandwidth 64
 no ip address
 encapsulation frame-relay IETF
 clock rate 64000
 frame-relay intf-type dce
 frame-relay route 301 interface Serial0/0 103

 
!############### EXAMPLES ############################################

!#####################################################################
! Chapter 3 Example OSPF with Multi Areas
!
! File: RTR.Ch3-ex.OSPF.Multi-area-01
!
! Procedures:
!  1. Configure router interfaces and addressing
!  2. Configure OSPF
!  3. Verify OSPF
!
! 1. Configure router interfaces and addressing
!
! R1
int f0/0
 ip add 10.64.0.1 255.255.255.252
 no shut

! R2
int f0/0
 ip add 10.64.0.2 255.255.255.252
 no shut

int s0/0
 enc ppp
 ip add 10.2.1.1 255.255.255.252
 no shut

! R3
int s0/0
 enc ppp
 ip add 10.2.1.2 255.255.255.252
 no shut

! 2. Configure OSPF
!
! R1
int lo0
 ip add 192.168.0.1 255.255.255.0

router ospf 1
 net 10.64.0.0 0.0.0.3 area 0
 
! R2
int lo0
 ip add 192.168.0.2 255.255.255.0

router ospf 1
 net 10.64.0.0 0.0.0.3 area 0

int s0/0
 ip ospf 1 area 1

! R3
int lo0
 ip add 192.168.0.3 255.255.255.0

int s0/0
 ip ospf 1 area 1

! 3. Verify OSPF
do sh ip ospf

do sh ip ospf nei

do sh ip ospf data

do sh ip rou



!#####################################################################
! Chapter 3 Example OSPF over FR with Nonbroadcast Mode
!
! File: RTR.Ch3-ex.OSPF.FR.Nonbroadcast-01
!
! NB: 
!  - manually configuring OSPF neighbors
!  - Defining the OSPF network type as nonbroadcast
!
! Procedures:
!  1. Configure router interfaces and addressing
!  2. Configure OSPF
!  3. Verify OSPF
!
! 1. Configure router interfaces and addressing
!
! R1
int lo0
 ip add 172.16.1.1 255.255.255.0

int s0/0
 enc fram ietf
 ip add 192.168.1.1 255.255.255.0
 fram map ip 192.168.1.2 102
 fram map ip 192.168.1.3 103
 no shut

! R2
int lo0
 ip add 172.16.2.1 255.255.255.0

int s0/0
 enc fram ietf
 ip add 192.168.1.2 255.255.255.0
 fram map ip 192.168.1.1 201
 fram map ip 192.168.1.3 203
 no shut

! R3
int lo0
 ip add 172.16.3.1 255.255.255.0

int s0/0
 enc fram ietf
 ip add 192.168.1.3 255.255.255.0
 fram map ip 192.168.1.1 301
 fram map ip 192.168.1.2 302
 no shut

! 2. Configure OSPF
!
! R1
router ospf 1
 nei 192.168.1.2
 nei 192.168.1.3
 net 192.168.1.0 0.0.0.255 area 0
 net 172.16.1.0 0.0.0.255 area 0

! int s0/0
!  ip ospf net non-broadcast

! R2
router ospf 1
 nei 192.168.1.1
 nei 192.168.1.3
 net 192.168.1.0 0.0.0.255 area 0
 net 172.16.2.0 0.0.0.255 area 0

! R3
router ospf 1
 nei 192.168.1.1
 nei 192.168.1.2
 net 192.168.1.0 0.0.0.255 area 0
 net 172.16.3.0 0.0.0.255 area 0

! int s0/0
!  ip ospf net non-broadcast

! 3. Verify OSPF
do sh ip ospf
do sh ip ospf int s0/0

do sh ip ospf nei
do sh ip ospf data
do sh ip rou



!#####################################################################
! Chapter 3 Example OSPF over FR with Point-to-Multipoint Mode
!
! File: RTR.Ch3-ex.OSPF.FR.P2M-01
!
! NB: 
!  - manually configuring OSPF neighbors
!  - Defining the OSPF network type as nonbroadcast
!
! Procedures:
!  1. Configure router interfaces and addressing
!  2. Configure OSPF
!  3. Verify OSPF
!
! 1. Configure router interfaces and addressing
!
! R1
int lo0
 ip add 172.16.1.1 255.255.255.0

int s0/0
 enc fram ietf
 ip add 192.168.1.1 255.255.255.0
 fram map ip 192.168.1.2 102 bro
 fram map ip 192.168.1.3 103 bro
 no shut

! R2
int lo0
 ip add 172.16.2.1 255.255.255.0

int s0/0
 enc fram ietf
 ip add 192.168.1.2 255.255.255.0
 fram map ip 192.168.1.1 201 bro
 fram map ip 192.168.1.3 201
 no shut

! R3
int lo0
 ip add 172.16.3.1 255.255.255.0

int s0/0
 enc fram ietf
 ip add 192.168.1.3 255.255.255.0
 fram map ip 192.168.1.1 301 bro
 fram map ip 192.168.1.2 301
 no shut

! 2. Configure OSPF
!
! R1
router ospf 1
 net 192.168.1.0 0.0.0.255 area 0
 net 172.16.1.0 0.0.0.255 area 0

int s0/0
 ip ospf net point-to-multipoint

! R2
router ospf 1
 net 192.168.1.0 0.0.0.255 area 0
 net 172.16.2.0 0.0.0.255 area 0

int s0/0
 ip ospf net point-to-multipoint

! R3
router ospf 1
 net 192.168.1.0 0.0.0.255 area 0
 net 172.16.3.0 0.0.0.255 area 0

int s0/0
 ip ospf net point-to-multipoint

! 3. Verify OSPF
do sh ip ospf
do sh ip ospf int s0/0

do sh ip ospf nei
do sh ip ospf data
do sh ip rou


!#####################################################################
! Chapter 3 Example OSPF over FR with Point-to-Multipoint 
!                   Nonbroadcast Mode
!
! File: RTR.Ch3-ex.OSPF.FR.P2M.Nonbroadcast-01
!
! NB: 
!  - manually configuring OSPF neighbors
!  - Defining the OSPF network type as nonbroadcast
!
! Procedures:
!  1. Configure router interfaces and addressing
!  2. Configure OSPF
!  3. Verify OSPF
!
! 1. Configure router interfaces and addressing
!
! R1
int lo0
 ip add 172.16.1.1 255.255.255.0

int s0/0
 enc fram ietf
 ip add 192.168.1.1 255.255.255.0
 fram map ip 192.168.1.2 102
 fram map ip 192.168.1.3 103
 no shut

! R2
int lo0
 ip add 172.16.2.1 255.255.255.0

int s0/0
 enc fram ietf
 ip add 192.168.1.2 255.255.255.0
 fram map ip 192.168.1.1 201
 fram map ip 192.168.1.3 201
 no shut

! R3
int lo0
 ip add 172.16.3.1 255.255.255.0

int s0/0
 enc fram ietf
 ip add 192.168.1.3 255.255.255.0
 fram map ip 192.168.1.1 301
 fram map ip 192.168.1.2 301
 no shut

! 2. Configure OSPF
!
! R1
int s0/0
 ip ospf net point-to-multipoint non-broadcast

router ospf 1
 nei 192.168.1.2
 nei 192.168.1.3
 net 192.168.1.0 0.0.0.255 area 0
 net 172.16.1.0 0.0.0.255 area 0

! R2
int s0/0
 ip ospf net point-to-multipoint non-broadcast

router ospf 1
 nei 192.168.1.1
 net 192.168.1.0 0.0.0.255 area 0
 net 172.16.2.0 0.0.0.255 area 0

! R3
int s0/0
 ip ospf net point-to-multipoint non-broadcast

router ospf 1
 nei 192.168.1.1
 net 192.168.1.0 0.0.0.255 area 0
 net 172.16.3.0 0.0.0.255 area 0

! 3. Verify OSPF
do sh ip ospf
do sh ip ospf int s0/0

do sh ip ospf nei
do sh ip ospf data
do sh ip rou


!#####################################################################
! Chapter 3 Example OSPF over FR with Broadcast Mode
!
! File: RTR.Ch3-ex.OSPF.FR.Broadcast-01
!
! Procedures:
!  1. Configure router interfaces and addressing
!  2. Configure OSPF
!  3. Verify OSPF
!
! 1. Configure router interfaces and addressing
!
! R1
int lo0
 ip add 172.16.1.1 255.255.255.0

int s0/0
 enc fram ietf
 ip add 192.168.1.1 255.255.255.0
 fram map ip 192.168.1.2 102 bro
 fram map ip 192.168.1.3 103 bro
 no shut

! R2
int lo0
 ip add 172.16.2.1 255.255.255.0

int s0/0
 enc fram ietf
 ip add 192.168.1.2 255.255.255.0
 fram map ip 192.168.1.1 201 bro
 fram map ip 192.168.1.3 203 bro
 no shut

! R3
int lo0
 ip add 172.16.3.1 255.255.255.0

int s0/0
 enc fram ietf
 ip add 192.168.1.3 255.255.255.0
 fram map ip 192.168.1.1 301 bro
 fram map ip 192.168.1.2 302 bro
 no shut

! 2. Configure OSPF
!
! R1
int s0/0
 ip ospf net broadcast

router ospf 1
 net 192.168.1.0 0.0.0.255 area 0
 net 172.16.1.0 0.0.0.255 area 0

! R2
int s0/0
 ip ospf net broadcast

router ospf 1
 net 192.168.1.0 0.0.0.255 area 0
 net 172.16.2.0 0.0.0.255 area 0

! R3
int s0/0
 ip ospf net broadcast

router ospf 1
 net 192.168.1.0 0.0.0.255 area 0
 net 172.16.3.0 0.0.0.255 area 0

! 3. Verify OSPF
do sh ip ospf
do sh ip ospf int s0/0

do sh ip ospf nei
do sh ip ospf data
do sh ip rou



!#####################################################################
! Chapter 3 Example OSPF over FR with Point-to-Point Mode
!
! File: RTR.Ch3-ex.OSPF.FR.P2P-01
!
! Procedures:
!  1. Configure router interfaces and addressing
!  2. Configure OSPF
!  3. Verify OSPF
!
! 1. Configure router interfaces and addressing
!
! R1
int lo0
 ip add 172.16.1.1 255.255.255.0

int s0/0
 enc fram ietf
 ip add 192.168.1.1 255.255.255.0
 fram interface-dlci 102
 no shut

! R2
int lo0
 ip add 172.16.2.1 255.255.255.0

int s0/0
 enc fram ietf
 ip add 192.168.1.2 255.255.255.0
 fram interface-dlci 201
 no shut

! 2. Configure OSPF
!
! R1
int s0/0
 ip ospf net point-to-point

router ospf 1
 net 192.168.1.0 0.0.0.255 area 0
 net 172.16.1.0 0.0.0.255 area 0

! R2
int s0/0
 ip ospf net point-to-point

router ospf 1
 net 192.168.1.0 0.0.0.255 area 0
 net 172.16.2.0 0.0.0.255 area 0

! 3. Verify OSPF
do sh ip ospf
do sh ip ospf int s0/0

do sh ip ospf nei
do sh ip ospf data
do sh ip rou


!#####################################################################
! Chapter 3 Example OSPF over FR with Point-to-Point Subinterfaces
!
! File: RTR.Ch3-ex.OSPF.FR.P2P.Subif-01
!
! Procedures:
!  1. Configure router interfaces and addressing
!  2. Configure OSPF
!  3. Verify OSPF
!
! 1. Configure router interfaces and addressing
!
! R1
int lo0
 ip add 172.16.1.1 255.255.255.0

int s0/0
 enc fram ietf
 no shut

int s0/0.1 point
 ip add 10.1.1.1 255.255.255.0
 fram interface-dlci 102

int s0/0.2 point
 ip add 10.2.2.1 255.255.255.0
 fram interface-dlci 103

! R2
int lo0
 ip add 172.16.2.1 255.255.255.0

int s0/0
 enc fram ietf
 no shut

int s0/0.1 point-to-point
 ip add 10.1.1.2 255.255.255.0
 fram interface-dlci 201

! R3
int lo0
 ip add 172.16.3.1 255.255.255.0

int s0/0
 enc fram ietf
 ip add 10.2.2.2 255.255.255.0
 fram interface-dlci 301
 ip ospf net point-to-point
 no shut

! 2. Configure OSPF
!
! R1
router ospf 1
 net 10.1.1.0 0.0.0.255 area 0
 net 10.2.2.0 0.0.0.255 area 0
 net 172.16.1.0 0.0.0.255 area 0

! R2
router ospf 1
 net 10.1.1.0 0.0.0.255 area 0
 net 172.16.2.0 0.0.0.255 area 0

! R3
router ospf 1
 net 10.2.2.0 0.0.0.255 area 0
 net 172.16.3.0 0.0.0.255 area 0

! 3. Verify OSPF
do sh ip ospf
do sh ip ospf int s0/0

do sh ip ospf nei
do sh ip ospf data
do sh ip rou


!#####################################################################
! Chapter 3 Example OSPF over FR with Multipoint Subinterfaces
!
! File: RTR.Ch3-ex.OSPF.FR.Multipoint.Subif-01
!
! Procedures:
!  1. Configure router interfaces and addressing
!  2. Configure OSPF
!  3. Verify OSPF
!
! 1. Configure router interfaces and addressing
!
! R1
int lo0
 ip add 172.16.1.1 255.255.255.0

int s0/0
 enc fram ietf
 no shut

int s0/0.1 point
 ip add 10.1.1.1 255.255.255.0
 fram interface-dlci 102

int s0/0.2 multipoint
 ip add 10.2.2.1 255.255.255.0
 fram map ip 10.2.2.3 103 bro
 fram map ip 10.2.2.4 104 bro

! R2
int lo0
 ip add 172.16.2.1 255.255.255.0

int s0/0
 enc fram ietf
 no shut

int s0/0.1 point-to-point
 ip add 10.1.1.2 255.255.255.0
 fram interface-dlci 201

! R3
int lo0
 ip add 172.16.3.1 255.255.255.0

int s0/0
 enc fram ietf
 ip add 10.2.2.3 255.255.255.0
 fram map ip 10.2.2.1 301 bro
 fram map ip 10.2.2.4 301
 no shut

! R4
int lo0
 ip add 172.16.4.1 255.255.255.0

int s0/0
 enc fram ietf
 ip add 10.2.2.4 255.255.255.0
 fram map ip 10.2.2.1 401 bro
 fram map ip 10.2.2.3 401
 no shut

! 2. Configure OSPF
!
! R1
router ospf 1
 net 10.1.1.0 0.0.0.255 area 0
 net 10.2.2.0 0.0.0.255 area 0
 net 172.16.1.0 0.0.0.255 area 0
 nei 10.2.2.3
 nei 10.2.2.4

int s0/0.2
 ip ospf pri 3

int lo0
 ip osp net point-to-point

! R2
router ospf 1
 net 10.1.1.0 0.0.0.255 area 0
 net 172.16.2.0 0.0.0.255 area 0

int lo0
 ip osp net point-to-point

! R3
router ospf 1
 net 10.2.2.0 0.0.0.255 area 0
 net 172.16.3.0 0.0.0.255 area 0
 nei 10.2.2.1

int s0/0
 ip ospf pri 0

int lo0
 ip osp net point-to-point

! R4
router ospf 1
 net 10.2.2.0 0.0.0.255 area 0
 net 172.16.4.0 0.0.0.255 area 0
 nei 10.2.2.1

int s0/0
 ip ospf pri 0

int lo0
 ip osp net point-to-point

! 3. Verify OSPF
do sh ip ospf
do sh ip ospf int s0/0

do sh ip ospf nei
do sh ip ospf data
do sh ip rou


! 
! Running Configuration
!
! R1
interface Loopback0
 ip address 172.16.1.1 255.255.255.0
 ip ospf network point-to-point
!
interface Serial0/0
 no ip address
 encapsulation frame-relay IETF
 clock rate 2000000
!
interface Serial0/0.1 point-to-point
 ip address 10.1.1.1 255.255.255.0
 frame-relay interface-dlci 102   
!
interface Serial0/0.2 multipoint
 ip address 10.2.2.1 255.255.255.0
 ip ospf priority 3
 frame-relay map ip 10.2.2.3 103 broadcast
 frame-relay map ip 10.2.2.4 104 broadcast
!
router ospf 1
 log-adjacency-changes
 network 10.1.1.0 0.0.0.255 area 0
 network 10.2.2.0 0.0.0.255 area 0
 network 172.16.1.0 0.0.0.255 area 0
 neighbor 10.2.2.3
 neighbor 10.2.2.4

! R2
interface Loopback0
 ip address 172.16.2.1 255.255.255.0
 ip ospf network point-to-point
!
interface Serial0/0
 no ip address
 encapsulation frame-relay IETF
 clock rate 2000000
!
interface Serial0/0.1 point-to-point
 ip address 10.1.1.2 255.255.255.0
 frame-relay interface-dlci 201   
!
router ospf 1
 log-adjacency-changes
 network 10.1.1.0 0.0.0.255 area 0
 network 172.16.2.0 0.0.0.255 area 0

! R3
interface Loopback0
 ip address 172.16.3.1 255.255.255.0
 ip ospf network point-to-point
!
interface Serial0/0
 ip address 10.2.2.3 255.255.255.0
 encapsulation frame-relay IETF
 ip ospf priority 0
 clock rate 2000000
 frame-relay map ip 10.2.2.1 301 broadcast
 frame-relay map ip 10.2.2.4 301
!
router ospf 1
 log-adjacency-changes
 network 10.2.2.0 0.0.0.255 area 0
 network 172.16.3.0 0.0.0.255 area 0

! R4
interface Loopback0
 ip address 172.16.4.1 255.255.255.0
 ip ospf network point-to-point
!
interface Serial0/0
 ip address 10.2.2.4 255.255.255.0
 encapsulation frame-relay IETF
 ip ospf priority 0
 clock rate 2000000
 frame-relay map ip 10.2.2.1 401 broadcast
 frame-relay map ip 10.2.2.3 401
!
router ospf 1
 log-adjacency-changes
 network 10.2.2.0 0.0.0.255 area 0
 network 172.16.4.0 0.0.0.255 area 0



!#####################################################################
! Chapter 3 Example OSPF LSDB Tunning
!
! File: RTR.Ch3-ex.OSPF.LSDB-01
!
! Procedures:
!  1. Configure router interfaces and addressing
!  2. Configure OSPF
!  3. Verify Connectivity
! 
! 1. Configure router interfaces and addressing
!
! R1
int lo0
 ip add 192.168.1.1

int f0/0
 ip add 10.1.1.1 255.255.255.0
 no shut

int s0/0
 enc fram ietf
 no shut

int s0/0.1 multipoint
 ip add 172.31.11.1 255.255.255.0
 fram map ip 172.31.11.4 103 bro
 fram map ip 172.31.11.2 103

int s0/0.2 point-to-point
 ip add 10.11.0.1 255.255.255.0
 fram interface-dlci 102

int s0/1
 enc ppp
 ip add 10.1.0.1 255.255.255.0
 no shut

! R2
int lo0
 ip add 192.168.1.2

int f0/0
 ip add 10.1.2.2 255.255.255.0
 no shut

int s0/0
 enc fram ietf
 no shut

int s0/0.1 multipoint
 ip add 172.31.11.2 255.255.255.0
 fram map ip 172.31.11.1 203
 fram map ip 172.31.11.4 203 bro

int s0/0.2 point-to-point
 ip add 10.11.0.2 255.255.255.0
 fram interface-dlci 201

int s0/1
 enc ppp
 ip add 10.1.0.2 255.255.255.0
 no shut

! R3
int lo0
 ip add 192.168.1.3 255.255.255.0

int f0/0
 ip add 10.1.1.3 255.255.255.0
 no shut

int s0/0
 enc ppp
 ip add 10.1.3.3 255.255.255.0
 no shut

! R4
int lo0
 ip add 192.168.1.4 255.255.255.0

int f0/0
 ip add 10.1.2.4 255.255.255.0
 no shut

int s0/0
 enc ppp
 ip add 10.1.3.4 255.255.255.0
 no shut

! R5
hostname BBR2

int lo0
 ip add 192.168.1.5 255.255.255.0

int lo1
 desc TFTP Server
 ip add 10.254.0.254 255.255.255.0

int s0/0
 enc fram ietf
 ip add 172.31.11.4 255.255.255.0
 fram map ip 172.31.11.1 301 bro
 fram map ip 172.31.11.2 302 bro
 no shut
 
! 2. Configure OSPF
!
! R1
router ospf 1
 net 10.1.1.0 0.0.0.255 area 1
 net 10.1.0.0 0.0.0.255 area 1
 net 10.11.0.0 0.0.0.255 area 0
 net 172.31.11.0 0.0.0.255 area 0
 nei 192.169.1.5 
 area 2 stub

! R2
router ospf 1
 net 10.1.2.0 0.0.0.255 area 1
 net 10.1.0.0 0.0.0.255 area 1
 net 10.11.0.0 0.0.0.255 area 0
 net 172.31.11.0 0.0.0.255 area 0
 nei 192.169.1.5 
 area 2 stub

! R3
router ospf  1
 net 10.1.1.0 0.0.0.255 area 1
 net 10.1.3.0 0.0.0.255 area 1
 area 2 stub

! R4
router ospf 1
 net 10.1.2.0 0.0.0.255 area 1
 net 10.1.0.0 0.0.0.255 area 1
 area 2 stub

! R5
router osp 1
 net 172.31.11.0 0.0.0.255 area 0
 net 10.254.0.0 0.0.0.255 area 0
 nei 192.168.1.1
 nei 192.168.1.2

! 4. Verify Connectivity
do deb ip sopf adj

do sh ip ospf

do sh ip ospf nei

do sh ip ospf data

do sh ip rou ospf


!
! Running Configuration
!
! R1
interface Loopback0
 no ip address
!
interface FastEthernet0/0
 ip address 10.1.1.1 255.255.255.0
 duplex auto
 speed auto
!
interface Serial0/0
 no ip address
 encapsulation frame-relay IETF
 clock rate 2000000
!
interface Serial0/0.1 multipoint
 ip address 172.31.11.1 255.255.255.0
 frame-relay map ip 172.31.11.2 103
 frame-relay map ip 172.31.11.4 103 broadcast
!
interface Serial0/0.2 point-to-point
 ip address 10.11.0.1 255.255.255.0
 frame-relay interface-dlci 102   
!
interface Serial0/1
 ip address 10.1.0.1 255.255.255.0
 encapsulation ppp
 clock rate 2000000
!
router ospf 1
 log-adjacency-changes
 area 2 stub
 network 10.1.0.0 0.0.0.255 area 1
 network 10.1.1.0 0.0.0.255 area 1
 network 10.11.0.0 0.0.0.255 area 0
 network 172.31.11.0 0.0.0.255 area 0
 neighbor 192.169.1.5

! R2
interface Loopback0
 no ip address
!
interface FastEthernet0/0
 ip address 10.1.2.2 255.255.255.0
 duplex auto
 speed auto
!
interface Serial0/0
 no ip address
 encapsulation frame-relay IETF
 clock rate 2000000
!
interface Serial0/0.1 multipoint
 ip address 172.31.11.2 255.255.255.0
 frame-relay map ip 172.31.11.1 203
 frame-relay map ip 172.31.11.4 203 broadcast
!
interface Serial0/0.2 point-to-point
 ip address 10.11.0.2 255.255.255.0
 frame-relay interface-dlci 201   
!
interface Serial0/1
 ip address 10.1.0.2 255.255.255.0
 encapsulation ppp
 clock rate 2000000
!
router ospf 1
 log-adjacency-changes
 area 2 stub
 network 10.1.0.0 0.0.0.255 area 1
 network 10.1.2.0 0.0.0.255 area 1
 network 10.11.0.0 0.0.0.255 area 0
 network 172.31.11.0 0.0.0.255 area 0
 neighbor 192.169.1.5

! R3
interface Loopback0
 ip address 192.168.1.3 255.255.255.0
!
interface FastEthernet0/0
 ip address 10.1.1.3 255.255.255.0
 duplex auto
 speed auto
!
interface Serial0/0
 ip address 10.1.3.3 255.255.255.0
 encapsulation ppp
 clock rate 2000000
!
router ospf 1
 log-adjacency-changes
 area 2 stub
 network 10.1.1.0 0.0.0.255 area 1
 network 10.1.3.0 0.0.0.255 area 1

! R4
interface Loopback0
 ip address 192.168.1.4 255.255.255.0
!
interface FastEthernet0/0
 ip address 10.1.2.4 255.255.255.0
 duplex auto
 speed auto
!
interface Serial0/0
 ip address 10.1.3.4 255.255.255.0
 encapsulation ppp
 clock rate 2000000
!
router ospf 1
 log-adjacency-changes
 area 2 stub
 network 10.1.0.0 0.0.0.255 area 1
 network 10.1.2.0 0.0.0.255 area 1

! R5
interface Loopback0
 ip address 192.168.1.5 255.255.255.0
!
interface Loopback1
 description TFTP Server
 ip address 10.254.0.254 255.255.255.0
!
interface FastEthernet0/0
 no ip address
 shutdown
 duplex auto
 speed auto
!
interface Serial0/0
 ip address 172.31.11.4 255.255.255.0
 encapsulation frame-relay IETF
 clock rate 2000000
 frame-relay map ip 172.31.11.1 301
 frame-relay map ip 172.31.11.2 302
!
router ospf 1
 log-adjacency-changes
 network 10.254.0.0 0.0.0.255 area 0
 network 172.31.11.0 0.0.0.255 area 0
 neighbor 172.31.11.1
 neighbor 172.31.11.2

!#####################################################################
! Chapter 3 Example OSPF Inter-area Route Summarization
!
! File: RTR.Ch3-ex.OSPF.Summay.inter-01
!
! Procedures:
!  1. Configure router interfaces and addressing
!  2. Configure OSPF
!  3. Verify Connectivity
!
! 1. Configure router interfaces and addressing
!
! R1
int lo0
 ip add 172.16.97.1 255.255.255.0
 ip ospf net point-to-point

int lo1
 ip add 172.16.111.254 255.255.255.0
 ip ospf net point-to-point

int lo10
 ip add 172.16.32.1 255.255.255.0
 ip ospf net point-to-point

int lo11
 ip add 172.16.63.254 255.255.255.0
 ip ospf net point-to-point

int f0/0
 ip add 172.16.96.1 255.255.255.0
 no shut

! R2
int lo0
 ip add 172.16.112.1 255.255.255.0
 ip ospf net point-to-point

int lo1
 ip add 172.16.127.254 255.255.255.0
 ip ospf net point-to-point

int lo10
 ip add 172.16.64.1 255.255.255.0
 ip ospf net point-to-point

int lo11
 ip add 172.16.95.254 255.255.255.0
 ip ospf net point-to-point

int f0/0
 ip add 172.16.96.2 255.255.255.0
 no shut

! 2. Configure OSPF
!
! R1
router ospf 1
 net 172.16.96.0 0.0.0.255 area 0
 net 172.16.97.0 0.0.0.255 area 0
 net 172.16.111.0 0.0.0.255 area 0
 net 172.16.32.0 0.0.0.255 area 1
 net 172.16.63.0 0.0.0.255 area 1
 area 1 range 172.16.32.0 255.255.224.0

! R2
router ospf 1
 net 172.16.96.0 0.0.0.255 area 0
 net 172.16.112.0 0.0.0.255 area 0
 net 172.16.127.0 0.0.0.255 area 0
 net 172.16.64.0 0.0.0.255 area 2
 net 172.16.95.0 0.0.0.255 area 2
 area 1 range 172.16.64.0 255.255.224.0

! 3. Verify Connectivity
do sh ip rou ospf

do sh ip ospf data



!#####################################################################
! Chapter 3 Example OSPF External Route Summarization
!
! File: RTR.Ch3-ex.OSPF.Summay.external-01
!
! Procedures:
!  1. Configure router interfaces and addressing
!  2. Configure OSPF, RIPv2
!  3. Verify Connectivity
!
! 1. Configure router interfaces and addressing
!
! R1
int lo0
 ip add 192.168.1.1 255.255.255.0

int lo1
 ip add 172.16.33.4 255.255.255.0
 ip ospf net point-to-point

int lo2
 ip add 172.16.65.3 255.255.255.0
 ip ospf net point-to-point

int f0/0
 ip add 172.16.64.1 255.255.255.0
 no shut

int f0/1
 ip add 172.16.32.1 255.255.255.0
 no shut

! R2
int lo0
 ip add 192.168.2.1 255.255.255.0

int lo1
 ip add 172.16.66.4 255.255.255.0
 ip ospf net point-to-point

int lo2
 ip add 172.16.1.3 255.255.255.0
 ip ospf net point-to-point

int f0/0
 ip add 172.16.64.2 255.255.255.0
 no shut

int f0/1
 ip add 172.16.0.2 255.255.255.0
 no shut

! R3
int lo0
 ip add 192.168.3.1 255.255.255.0

int lo1
 ip add 172.16.34.3 255.255.255.0

int lo2
 ip add 172.16.63.1 255.255.255.0

int f0/0
 ip add 172.16.32.2 255.255.255.0
 no shut

! R4
int lo0
 ip add 192.168.4.1 255.255.255.0

int lo1
 ip add 172.16.1.4 255.255.255.0

int f0/0
 ip add 172.16.0.1 255.255.255.0
 no shut

! 2. Configure OSPF
!
! R1
router ospf 1
 net 172.16.64.0 0.0.0.255 area 1
 net 172.16.65.0 0.0.0.255 area 1
 red rip subnets metric 300
 summary-address 172.16.32.0 255.255.224.0 

router rip
 ver 2
 no au
 net 172.16.0.0
 passive-interface f0/0
 red ospf 1 metric 5

! R2
router ospf 1
 net 172.16.64.0 0.0.0.255 area 1
 net 172.16.66.0 0.0.0.255 area 1
 net 172.16.0.0 0.0.0.255 area 0
 net 172.16.1.0 0.0.0.255 area 0

! R3
router rip
 ver 2
 no au
 net 172.16.0.0

! R4
router ospf 1
 net 172.16.0.0 0.0.0.255 area 0
 net 172.16.31.0 0.0.0.255 area 0

! 3. Verify Connectivity
do deb ip osp adj

do sh ip rou ospf

do sh ip osp data


! 
! Running Configuration
!
! R1
interface Loopback0
 ip address 192.168.1.1 255.255.255.0
!
interface Loopback1
 ip address 172.16.33.4 255.255.255.0
 ip ospf network point-to-point
!
interface Loopback2
 ip address 172.16.65.3 255.255.255.0
 ip ospf network point-to-point
!
interface FastEthernet0/0
 ip address 172.16.64.1 255.255.255.0
 duplex auto
 speed auto
!
interface FastEthernet0/1
 ip address 172.16.32.1 255.255.255.0
 duplex auto
 speed auto
!
router ospf 1
 log-adjacency-changes
 summary-address 172.16.32.0 255.255.224.0
 redistribute rip metric 300 subnets
 network 172.16.64.0 0.0.0.255 area 1
 network 172.16.65.0 0.0.0.255 area 1
!
router rip
 version 2
 redistribute ospf 1 metric 5
 passive-interface FastEthernet0/0
 network 172.16.0.0
 no auto-summary

! R2
interface Loopback0
 ip address 192.168.2.1 255.255.255.0
!
interface Loopback1
 ip address 172.16.66.4 255.255.255.0
 ip ospf network point-to-point
!
interface Loopback2
 ip address 172.16.1.3 255.255.255.0
 ip ospf network point-to-point
!
interface FastEthernet0/0
 ip address 172.16.64.2 255.255.255.0
 duplex auto
 speed auto
!
interface FastEthernet0/1
 ip address 172.16.0.2 255.255.255.0
 duplex auto
 speed auto
!
router ospf 1
 log-adjacency-changes
 network 172.16.0.0 0.0.0.255 area 0
 network 172.16.1.0 0.0.0.255 area 0
 network 172.16.64.0 0.0.0.255 area 1
 network 172.16.66.0 0.0.0.255 area 1

! R3
interface Loopback0
 ip address 192.168.3.1 255.255.255.0
!
interface Loopback1
 ip address 172.16.34.3 255.255.255.0
!
interface Loopback2
 ip address 172.16.63.1 255.255.255.0
!
interface FastEthernet0/0
 ip address 172.16.32.2 255.255.255.0
 duplex auto
 speed auto
!
interface FastEthernet0/1
 no ip address
 shutdown
 duplex auto
 speed auto
!         
router rip
 version 2
 network 172.16.0.0
 no auto-summary

! R4
interface Loopback0
 ip address 192.168.4.1 255.255.255.0
!
interface Loopback1
 ip address 172.16.1.4 255.255.255.0
!
interface FastEthernet0/0
 ip address 172.16.0.1 255.255.255.0
 duplex auto
 speed auto
!
interface FastEthernet0/1
 no ip address
 shutdown
 duplex auto
 speed auto
!
router ospf 1
 log-adjacency-changes
 network 172.16.0.0 0.0.0.255 area 0
 network 172.16.31.0 0.0.0.255 area 0

!#####################################################################
! Chapter 3 Example OSPF Virtual Link and Authentication
!
! File: RTR.Ch3-ex.OSPF.Summary.VL.Auth-01
!
! Procedures:
!  1. Configure router interfaces and addressing
!  2. Configure OSPF
!  3. Configure virtual Links
!  4. Configure authentication
!  5. Verify Connectivity
!
! 1. Configure router interfaces and addressing
!
! R1
int lo0
 ip add 1.1.1.1 255.0.0.0

int s0/0
 enc ppp
 ip add 5.0.0.1 255.0.0.0 
 no shut

int f0/0
 ip add 4.0.0.1 255.0.0.0
 no shut

! R2
int lo0
 ip add 2.2.2.2 255.0.0.0

int s0/0
 enc ppp
 ip add 5.0.0.2 255.0.0.0 
 no shut

int s0/1
 enc ppp
 ip add 6.0.0.2 255.0.0.0
 no shut

! R3
int lo0
 ip add 3.3.3.3 255.0.0.0

int s0/0
 enc ppp
 ip add 6.0.0.3 255.0.0.0
 no shut

int f0/0
 ip add 12.0.0.3 255.0.0.0
 no shut

! R4
int lo0
 ip add 10.10.10.10 255.255.255.0

int f0/0
 ip add 4.0.0.2 255.0.0.0
 no shut

! R5
int lo0
 ip add 5.5.5.5 255.255.255.0

int f0/0
 ip add 12.0.0.4 255.0.0.0
 no shut

! 2. Configure OSPF with virtual link
!
! R1
router ospf 100
 net 5.0.0.0 0.255.255.255 area 1
 net 4.0.0.0 0.255.255.255 area 0
 
! R2
router ospf 100
 net 5.0.0.0 0.255.255.255 area 1
 net 6.0.0.0 0.255.255.255 area 1

! R3
router ospf 100
 net 6.0.0.0 0.255.255.255 area 1
 net 12.0.0.0 0.255.255.255 area 2

! R4
router ospf 100
 net 4.0.0.0 0.255.255.255 area 0

! R5
router ospf 100
 net 12.0.0.0 0.255.255.255 area 2
 
! 3. Configure virtual Links
!
! R1
route rospf 100
 area 1 virtual link 3.3.3.3

! R3
router ospf 100
 area 1 virtual-link 1.1.1.1

! 4. Configure authentication
! 
! R1 
router ospf 100
 area 0 authentication
 area 1 virtual-link 3.3.3.3 authenticaton-key cisco

! R3
router ospf 100
 area 0 authentication
 area 1 virtual-link 1.1.1.1 authenticaton-key cisco

! 5. Verify Connectivity
do sh ip ospf 

do sh ip ospf nei

do sh ip ospf int s0/0

do sh ip ospf data

do sh ip rou 

do deb ip ospf adj


!#####################################################################
! Chapter 3 Example OSPF Stub and Totally Stubby Areas
!
! File: RTR.Ch3-ex.OSPF.Stub-01
!
! Procedures:
!  1. Configure router interfaces and addressing
!  2. Configure OSPF with stub area
!  3. Configure totally stubby area
!  4. Verify Connectivity
!
! 1. Configure router interfaces and addressing
!
! R1
int lo0
 ip add 192.168.254.1 255.255.255.0

int lo1
 ip add 192.168.16.1 255.255.255.0

int lo2
 ip add 192.168.20.1 255.255.255.0

int f0/0
 ip add 192.168.14.1 255.255.255.0
 no shut

! R2
int lo0
 ip add 192.168.254.2 255.255.255.0

int lo1
 ip add 192.168.17.1 255.255.255.0

int lo2
 ip add 192.168.19.1 255.255.255.0
 ip ospf net point-to-point

int f0/0
 ip add 192.168.14.2 255.255.255.0
 no shut

int s0/0
 enc ppp
 ip add 192.168.15.2 255.255.255.0
 no shut

! R3
int lo0
 ip add 192.168.254.3 255.255.255.0

int lo1
 ip add 192.168.18.1 255.255.255.0
 ip ospf net point-to-point
 no shut

int s0/0
 enc ppp
 ip add 192.168.15.3 255.255.255.0
 no shut

! 2. Configure OSPF and Stub Area
!
! R1
router ospf 100
 net 192.168.16.0 0.0.0.255 area 0
 net 192.168.14.0 0.0.0.255 area 0
 red rip subnets

router rip
 ver 2
 no au
 net 192.168.20.0
 passive-interface f0/0
 red ospf 100 metric 10 match external 1 external 2

! R2
router ospf 100
 net 192.168.14.0 0.0.0.255 area 0
 net 192.168.17.0 0.0.0.255 area 0
 net 192.168.15.0 0.0.0.255 area 2
 net 192.168.19.0 0.0.0.255 area 2
 area 2 stub

! R3
router ospf 100
 net 192.168.15.0 0.0.0.255 area 2
 net 192.168.18.0 0.0.0.255 area 2
 area 2 stub

! 3. Configure totally stubby area on R2
router ospf 100
 area 2 stub no-summary

! 4. Verify Connectivity
do sh ip rou

! Result comparison
!
! Stub area
R2(config-if)#do sh ip rou                      
...
Gateway of last resort is not set

C    192.168.14.0/24 is directly connected, FastEthernet0/0
     192.168.15.0/24 is variably subnetted, 2 subnets, 2 masks
C       192.168.15.3/32 is directly connected, Serial0/0
C       192.168.15.0/24 is directly connected, Serial0/0
O E2 192.168.20.0/24 [110/20] via 192.168.14.1, 00:00:00, FastEthernet0/0
C    192.168.17.0/24 is directly connected, Loopback1
C    192.168.254.0/24 is directly connected, Loopback0
     192.168.16.0/32 is subnetted, 1 subnets
O       192.168.16.1 [110/11] via 192.168.14.1, 00:03:50, FastEthernet0/0
C    192.168.19.0/24 is directly connected, Loopback2
O    192.168.18.0/24 [110/65] via 192.168.15.3, 00:00:02, Serial0/0

R3(config-if)#do sh ip rou
Gateway of last resort is 192.168.15.2 to network 0.0.0.0

O IA 192.168.14.0/24 [110/74] via 192.168.15.2, 00:00:20, Serial0/0
     192.168.15.0/24 is variably subnetted, 2 subnets, 2 masks
C       192.168.15.2/32 is directly connected, Serial0/0
C       192.168.15.0/24 is directly connected, Serial0/0
     192.168.17.0/32 is subnetted, 1 subnets
O IA    192.168.17.1 [110/65] via 192.168.15.2, 00:00:20, Serial0/0
C    192.168.254.0/24 is directly connected, Loopback0
     192.168.16.0/32 is subnetted, 1 subnets
O IA    192.168.16.1 [110/75] via 192.168.15.2, 00:00:21, Serial0/0
O    192.168.19.0/24 [110/65] via 192.168.15.2, 00:00:21, Serial0/0
C    192.168.18.0/24 is directly connected, Loopback1
O*IA 0.0.0.0/0 [110/65] via 192.168.15.2, 00:00:21, Serial0/0

! Totally stubby area
R2(config-router)#do sh ip rou
...
Gateway of last resort is not set

C    192.168.14.0/24 is directly connected, FastEthernet0/0
     192.168.15.0/24 is variably subnetted, 2 subnets, 2 masks
C       192.168.15.3/32 is directly connected, Serial0/0
C       192.168.15.0/24 is directly connected, Serial0/0
O E2 192.168.20.0/24 [110/20] via 192.168.14.1, 00:00:06, FastEthernet0/0
C    192.168.17.0/24 is directly connected, Loopback1
C    192.168.254.0/24 is directly connected, Loopback0
     192.168.16.0/32 is subnetted, 1 subnets
O       192.168.16.1 [110/11] via 192.168.14.1, 00:00:06, FastEthernet0/0
C    192.168.19.0/24 is directly connected, Loopback2
O    192.168.18.0/24 [110/65] via 192.168.15.3, 00:00:07, Serial0/0

R3(config-if)#do sh ip rou
Gateway of last resort is 192.168.15.2 to network 0.0.0.0

     192.168.15.0/24 is variably subnetted, 2 subnets, 2 masks
C       192.168.15.2/32 is directly connected, Serial0/0
C       192.168.15.0/24 is directly connected, Serial0/0
C    192.168.254.0/24 is directly connected, Loopback0
O    192.168.19.0/24 [110/65] via 192.168.15.2, 00:04:02, Serial0/0
C    192.168.18.0/24 is directly connected, Loopback1
O*IA 0.0.0.0/0 [110/65] via 192.168.15.2, 00:00:24, Serial0/0



!#####################################################################
! Chapter 3 Example OSPF NSSA and Totally Stubby NSSA Areas
!
! File: RTR.Ch3-ex.OSPF.nssa-01
!
! Procedures:
!  1. Configure router interfaces and addressing
!  2. Configure OSPF with NSSA area
!  3. Configure Totally Stubby NSSA area
!  4. Verify Connectivity
!
! 1. Configure router interfaces and addressing
!
! R1
int lo0
 ip add 192.168.1.1 255.255.255.0

int lo1
 ip add 172.16.12.1 255.255.255.0

int lo2 
 ip add 172.17.13.1 255.255.255.0
 ip ospf net point-to-point

int f0/1
 ip add 172.16.0.1 255.255.255.0
 no shut

int f0/0
 ip add 172.17.20.1 255.255.255.0
 no shut

! R2
int lo0
 ip add 192.168.2.1 255.255.255.0

int lo1
 ip add 172.17.14.1 255.255.255.0
 ip ospf net point-to-point

int lo2 
 ip add 172.17.15.1 255.255.255.0
 ip ospf net point-to-point

int f0/1
 ip add 172.17.0.2 255.255.255.0
 no shut

int f0/0
 ip add 172.17.20.2 255.255.255.0
 no shut

! R3
int lo0
 ip add 192.168.3.1 255.255.255.0

int lo1
 ip add 172.16.10.1 255.255.255.0

int lo2
 ip add 172.16.11.1 255.255.255.0

int f0/0
 ip add 172.16.0.2 255.255.255.0
 no shut

! R4
int lo0
 ip add 192.168.4.1 255.255.255.0

int lo1
 ip add 172.17.16.1 255.255.255.0
 ip ospf net point-to-point

int f0/0
 ip add 172.17.0.1 255.255.255.0
 no shut

! 2. Configure OSPF with NSSA area
!
! R1
router ospf 100
 net 172.17.20.0 0.0.0.255 area 1
 net 172.17.12.0 0.0.0.255 area 1
 red rip subnets metric 300

router rip
 ver 2
 no au
 net 172.16.0.0
 passive-interface f0/0
 red ospf 100 metric 5 

! R2
router osp 100
 net 172.17.20.0 0.0.0.255 area 1
 net 172.17.14.0 0.0.0.255 area 1
 net 172.17.15.0 0.0.0.255 area 0
 net 172.17.0.0 0.0.0.255 area 0

! R3
router rip
 net 172.16.0.0 
 ver 2
 no au

! R4
router ospf 100
 net 172.17.16.1 0.0.0.255 area 0
 net 172.17.0.0 0.0.0.255 area 0

! 3. Configure Totally Stubby NSSA area
!
! R1
router ospf 100
 area 1 nssa

! R2
router ospf 100
 area 1 nssa

! 4. Verify Connectivity
do sh ip rou

!
! Result Comparison
!
! Before NSSA
R2(config-router)#do sh ip rou
     172.17.0.0/24 is subnetted, 5 subnets
C       172.17.20.0 is directly connected, FastEthernet0/0
O       172.17.16.0 [110/11] via 172.17.0.1, 00:39:05, FastEthernet0/1
C       172.17.15.0 is directly connected, Loopback2
C       172.17.14.0 is directly connected, Loopback1
C       172.17.0.0 is directly connected, FastEthernet0/1
     172.16.0.0/24 is subnetted, 4 subnets
O E2    172.16.12.0 [110/300] via 172.17.20.1, 00:39:05, FastEthernet0/0
O E2    172.16.10.0 [110/300] via 172.17.20.1, 00:39:07, FastEthernet0/0
O E2    172.16.11.0 [110/300] via 172.17.20.1, 00:39:07, FastEthernet0/0
O E2    172.16.0.0 [110/300] via 172.17.20.1, 00:39:07, FastEthernet0/0
C    192.168.2.0/24 is directly connected, Loopback0

R3(config-router)#do sh ip rou
     172.17.0.0/24 is subnetted, 5 subnets
R       172.17.20.0 [120/5] via 172.16.0.1, 00:00:11, FastEthernet0/0
R       172.17.16.0 [120/5] via 172.16.0.1, 00:00:11, FastEthernet0/0
R       172.17.15.0 [120/5] via 172.16.0.1, 00:00:11, FastEthernet0/0
R       172.17.14.0 [120/5] via 172.16.0.1, 00:00:11, FastEthernet0/0
R       172.17.0.0 [120/5] via 172.16.0.1, 00:00:11, FastEthernet0/0
     172.16.0.0/24 is subnetted, 4 subnets
R       172.16.12.0 [120/1] via 172.16.0.1, 00:00:11, FastEthernet0/0
C       172.16.10.0 is directly connected, Loopback1
C       172.16.11.0 is directly connected, Loopback2
C       172.16.0.0 is directly connected, FastEthernet0/0
C    192.168.3.0/24 is directly connected, Loopback0

R4(config-router)#do sh ip rou
     172.17.0.0/24 is subnetted, 5 subnets
O IA    172.17.20.0 [110/20] via 172.17.0.2, 00:38:22, FastEthernet0/0
C       172.17.16.0 is directly connected, Loopback1
O       172.17.15.0 [110/11] via 172.17.0.2, 00:38:22, FastEthernet0/0
O IA    172.17.14.0 [110/11] via 172.17.0.2, 00:38:22, FastEthernet0/0
C       172.17.0.0 is directly connected, FastEthernet0/0
     172.16.0.0/24 is subnetted, 4 subnets
O E2    172.16.12.0 [110/300] via 172.17.0.2, 00:38:22, FastEthernet0/0
O E2    172.16.10.0 [110/300] via 172.17.0.2, 00:38:24, FastEthernet0/0
O E2    172.16.11.0 [110/300] via 172.17.0.2, 00:38:24, FastEthernet0/0
O E2    172.16.0.0 [110/300] via 172.17.0.2, 00:38:24, FastEthernet0/0
C    192.168.4.0/24 is directly connected, Loopback0

! NSSA
R2(config-router)#do sh ip rou   
     172.17.0.0/24 is subnetted, 5 subnets
C       172.17.20.0 is directly connected, FastEthernet0/0
O       172.17.16.0 [110/11] via 172.17.0.1, 00:00:21, FastEthernet0/1
C       172.17.15.0 is directly connected, Loopback2
C       172.17.14.0 is directly connected, Loopback1
C       172.17.0.0 is directly connected, FastEthernet0/1
     172.16.0.0/24 is subnetted, 4 subnets
O N2    172.16.12.0 [110/300] via 172.17.20.1, 00:00:21, FastEthernet0/0
O N2    172.16.10.0 [110/300] via 172.17.20.1, 00:00:23, FastEthernet0/0
O N2    172.16.11.0 [110/300] via 172.17.20.1, 00:00:23, FastEthernet0/0
O N2    172.16.0.0 [110/300] via 172.17.20.1, 00:00:23, FastEthernet0/0
C    192.168.2.0/24 is directly connected, Loopback0

R3(config-router)#do sh ip rou
     172.17.0.0/24 is subnetted, 5 subnets
R       172.17.20.0 [120/5] via 172.16.0.1, 00:00:04, FastEthernet0/0
R       172.17.16.0 [120/5] via 172.16.0.1, 00:00:00, FastEthernet0/0
R       172.17.15.0 [120/5] via 172.16.0.1, 00:00:00, FastEthernet0/0
R       172.17.14.0 [120/5] via 172.16.0.1, 00:00:00, FastEthernet0/0
R       172.17.0.0 [120/5] via 172.16.0.1, 00:00:00, FastEthernet0/0
     172.16.0.0/24 is subnetted, 4 subnets
R       172.16.12.0 [120/1] via 172.16.0.1, 00:00:04, FastEthernet0/0
C       172.16.10.0 is directly connected, Loopback1
C       172.16.11.0 is directly connected, Loopback2
C       172.16.0.0 is directly connected, FastEthernet0/0
C    192.168.3.0/24 is directly connected, Loopback0

R4(config-router)#do sh ip rou
     172.17.0.0/24 is subnetted, 5 subnets
O IA    172.17.20.0 [110/20] via 172.17.0.2, 00:00:07, FastEthernet0/0
C       172.17.16.0 is directly connected, Loopback1
O       172.17.15.0 [110/11] via 172.17.0.2, 00:00:07, FastEthernet0/0
O IA    172.17.14.0 [110/11] via 172.17.0.2, 00:00:07, FastEthernet0/0
C       172.17.0.0 is directly connected, FastEthernet0/0
     172.16.0.0/24 is subnetted, 4 subnets
O E2    172.16.12.0 [110/300] via 172.17.0.2, 00:00:07, FastEthernet0/0
O E2    172.16.10.0 [110/300] via 172.17.0.2, 00:00:08, FastEthernet0/0
O E2    172.16.11.0 [110/300] via 172.17.0.2, 00:00:08, FastEthernet0/0
O E2    172.16.0.0 [110/300] via 172.17.0.2, 00:00:08, FastEthernet0/0
C    192.168.4.0/24 is directly connected, Loopback0

! Totally Stubby NSSA 
R2(config-router)#do sh ip rou
     172.17.0.0/24 is subnetted, 5 subnets
C       172.17.20.0 is directly connected, FastEthernet0/0
O       172.17.16.0 [110/11] via 172.17.0.1, 00:04:40, FastEthernet0/1
C       172.17.15.0 is directly connected, Loopback2
C       172.17.14.0 is directly connected, Loopback1
C       172.17.0.0 is directly connected, FastEthernet0/1
     172.16.0.0/24 is subnetted, 4 subnets
O N2    172.16.12.0 [110/300] via 172.17.20.1, 00:04:40, FastEthernet0/0
O N2    172.16.10.0 [110/300] via 172.17.20.1, 00:04:41, FastEthernet0/0
O N2    172.16.11.0 [110/300] via 172.17.20.1, 00:04:41, FastEthernet0/0
O N2    172.16.0.0 [110/300] via 172.17.20.1, 00:04:41, FastEthernet0/0
C    192.168.2.0/24 is directly connected, Loopback0

R3(config-router)#do sh ip rou
     172.17.0.0/24 is subnetted, 5 subnets
R       172.17.20.0 [120/5] via 172.16.0.1, 00:00:02, FastEthernet0/0
R       172.17.16.0 [120/5] via 172.16.0.1, 00:00:02, FastEthernet0/0
R       172.17.15.0 [120/5] via 172.16.0.1, 00:00:02, FastEthernet0/0
R       172.17.14.0 [120/5] via 172.16.0.1, 00:00:02, FastEthernet0/0
R       172.17.0.0 [120/5] via 172.16.0.1, 00:00:02, FastEthernet0/0
     172.16.0.0/24 is subnetted, 4 subnets
R       172.16.12.0 [120/1] via 172.16.0.1, 00:00:02, FastEthernet0/0
C       172.16.10.0 is directly connected, Loopback1
C       172.16.11.0 is directly connected, Loopback2
C       172.16.0.0 is directly connected, FastEthernet0/0
C    192.168.3.0/24 is directly connected, Loopback0

R4(config-router)#do sh ip rou
     172.17.0.0/24 is subnetted, 5 subnets
O IA    172.17.20.0 [110/20] via 172.17.0.2, 00:05:24, FastEthernet0/0
C       172.17.16.0 is directly connected, Loopback1
O       172.17.15.0 [110/11] via 172.17.0.2, 00:05:24, FastEthernet0/0
O IA    172.17.14.0 [110/11] via 172.17.0.2, 00:05:24, FastEthernet0/0
C       172.17.0.0 is directly connected, FastEthernet0/0
     172.16.0.0/24 is subnetted, 4 subnets
O E2    172.16.12.0 [110/300] via 172.17.0.2, 00:05:24, FastEthernet0/0
O E2    172.16.10.0 [110/300] via 172.17.0.2, 00:05:25, FastEthernet0/0
O E2    172.16.11.0 [110/300] via 172.17.0.2, 00:05:25, FastEthernet0/0
O E2    172.16.0.0 [110/300] via 172.17.0.2, 00:05:25, FastEthernet0/0
C    192.168.4.0/24 is directly connected, Loopback0



!#####################################################################
! Chapter 3 Example OSPF Plain Text Authentication
!
! File: RTR.Ch3-ex.OSPF.Auth.text-01
!
! Procedures:
!  1. Configure router interfaces and addressing
!  2. Configure OSPF 
!  3. Configure Authetication
!  4. Verify Connectivity
!
! 1. Configure router interfaces and addressing
!
! R1
int lo0
 ip add 10.1.1.1 255.255.255.0 
 ip ospf net point-to-point

int s0/0
 enc ppp
 ip add 192.168.1.101 255.255.255.224
 no shut

! R2
int lo0
 ip add 10.2.2.2 255.255.255.0
 ip ospf net point-to-point

int s0/0
 enc ppp
 ip add 192.168.1.102 255.255.255.224
 no shut

! 2. Configure OSPF 
!
! R1
router ospf 100
 net 192.168.1.96 0.0.0.31 area 0
 net 10.1.1.0 0.0.0.255 area 0

! R2
router ospf 100
 net 192.168.1.96 0.0.0.31 area 0
 net 10.2.2.0 0.0.0.255 area 0

! 3. Configure Authetication
!
! R1 & R2
int s0/0
 ip ospf authentication
 ip ospf authentication-key plainpass

! 4. Verify Connectivity
do debug ip ospf adj

do sh ip rou

do sh ip ospf int s0/0

!#####################################################################
! Chapter 3 Example OSPF MD5 Authentication
!
! File: RTR.Ch3-ex.OSPF.Auth.text-01
!
! Procedures:
!  1. Configure router interfaces and addressing
!  2. Configure OSPF 
!  3. Configure Authetication
!  4. Verify Connectivity
!
! R1
int lo0
 ip add 10.1.1.1 255.255.255.0 
 ip ospf net point-to-point

int s0/0
 enc ppp
 ip add 192.168.1.101 255.255.255.224
 no shut

! R2
int lo0
 ip add 10.2.2.2 255.255.255.0
 ip ospf net point-to-point

int s0/0
 enc ppp
 ip add 192.168.1.102 255.255.255.224
 no shut

! 2. Configure OSPF 
!
! R1
router ospf 100
 net 192.168.1.96 0.0.0.31 area 0
 net 10.1.1.0 0.0.0.255 area 0

! R2
router ospf 100
 net 192.168.1.96 0.0.0.31 area 0
 net 10.2.2.0 0.0.0.255 area 0

! 3. Configure Authetication
!
! R1 & R2
int s0/0
 ip ospf authentication message-digest
 ip ospf message-digest-key 1 md5 secretpass

! 4. Verify Connectivity
do debug ip ospf adj

do sh ip rou

do sh ip ospf int s0/0


