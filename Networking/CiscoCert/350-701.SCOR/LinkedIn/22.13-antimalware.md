# Antimalware filtering

Trainer: Charles Judd


- Demo: enable anti-malware on ESA
  - one of the best solution: <span style="color: cyan;">enable Advanced Malware Protection (AMP)</span> within ESA
  - required to have a separate Cisco AMP feature
  - <span style="color: cyan;">Security Service</span> tab > Advanced Malware Protection > <span style="color: cyan;">File Reputation and Analysis</span>
  - File Reputation and Analysis > Advanced Malware Protection > 'Enable...' button > Success - AMP is now available to this Cisco IronPort appliance.
  - the feature required to apply per-policy basis
  - File Reputation and Analysis > 'Edit Global Settings...' button
  - Edit File Reputation and Analysis Settings > Advanced Malware Protection: File Reputation Filtering = Enabled; File Analysis =  Enable (a big list of file types); Advanced Settings for File Reputation Filtering; Advanced Settings for File Analysis
  - File Analysis selection: cisco recommended selecting all
  - Advanced settings for File Reputation and Analysis: config w/ well-known servers by default
  - 'Submit' button > File Reputation and Analysis: File Reputation = Enabled; File Analysis = Enabled


- Demo: config AMP in mail policies
  - <span style="color: cyan;">Mail Policies</span> tab > Email Security Manager  > <span style="color: cyan;">Incoming Mail Policies</span>
  - Incoming Mail Policies: areas - Find Policies, Policies > Policies: Policy Name = Default Policy, Advanced Malware Protection = Disabled > 'Disabled' link
  - Mail Policy: Advanced Malware Protection: Policy = DEFAULT; Enable Advanced Malware Protection for This Policy = Enable File Reputation; areas - Message Settings, Unscanable Actions on Message Errors, Unscanable Actions on Rate Limit, Unscanable Actions on AMP Service Not Available, Message with Malware Attachments, Messages with File Analysis Pending = Quarantine, Enable Mailbox About Remediation (MAR) = Enable (if using MS services)
  - best practice: using the <span style="color: cyan;">default settings</span> for actions and messages, except for the one w/ different value in the above list



